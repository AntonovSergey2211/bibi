(()=>{"use strict";var t,e,n,r,o,i;function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}!function(t){t.empty=function(){return{alphaMultiplier:1,redMultiplier:1,greenMultiplier:1,blueMultiplier:1,alphaOffset:0,redOffset:0,greenOffset:0,blueOffset:0}},t.isEmpty=function(t){return 1===t.redMultiplier&&1===t.greenMultiplier&&1===t.blueMultiplier&&1===t.alphaMultiplier&&0===t.redOffset&&0===t.greenOffset&&0===t.blueOffset&&0===t.alphaOffset},t.isEmptyWithAlpha=function(t){return 1===t.redMultiplier&&1===t.greenMultiplier&&1===t.blueMultiplier&&0===t.redOffset&&0===t.greenOffset&&0===t.blueOffset&&0===t.alphaOffset},t.setEmpty=function(t){t.redMultiplier=1,t.greenMultiplier=1,t.blueMultiplier=1,t.alphaMultiplier=1,t.redOffset=0,t.greenOffset=0,t.blueOffset=0,t.alphaOffset=0},t.copy=function(t,e){e.alphaMultiplier=t.alphaMultiplier,e.redMultiplier=t.redMultiplier,e.greenMultiplier=t.greenMultiplier,e.blueMultiplier=t.blueMultiplier,e.alphaOffset=t.alphaOffset,e.redOffset=t.redOffset,e.greenOffset=t.greenOffset,e.blueOffset=t.blueOffset},t.concat=function(t,e,n){var r=t.alphaMultiplier*e.alphaMultiplier,o=t.redMultiplier*e.redMultiplier,i=t.greenMultiplier*e.greenMultiplier,a=t.blueMultiplier*e.blueMultiplier,u=t.alphaMultiplier*e.alphaOffset+t.alphaOffset,c=t.redMultiplier*e.redOffset+t.redOffset,l=t.greenMultiplier*e.greenOffset+t.greenOffset,s=t.blueMultiplier*e.blueOffset+t.blueOffset;n.alphaMultiplier=r,n.redMultiplier=o,n.greenMultiplier=i,n.blueMultiplier=a,n.alphaOffset=u,n.redOffset=c,n.greenOffset=l,n.blueOffset=s}}(t||(t={})),function(t){t.empty=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:Number.MIN_VALUE,maxY:Number.MIN_VALUE}},t.setEmpty=function(t){t.minX=Number.MAX_VALUE,t.minY=Number.MAX_VALUE,t.maxX=Number.MIN_VALUE,t.maxY=Number.MIN_VALUE},t.isEmpty=function(t){return t.minX===Number.MAX_VALUE&&t.minY===Number.MAX_VALUE&&t.maxX===Number.MIN_VALUE&&t.maxY===Number.MIN_VALUE},t.toRectangle=function(t,e){var n=t.minX,r=t.minY,o=t.maxX,i=t.maxY;e.x=n,e.y=r,e.width=o-n,e.height=i-r},t.testX=function(t,e){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e)},t.testY=function(t,e){t.minY>e?t.minY=e:t.maxY<e&&(t.maxY=e)},t.test=function(t,e,n){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e),t.minY>n?t.minY=n:t.maxY<n&&(t.maxY=n)},t.testPoint=function(t,e){var n=e.x,r=e.y;t.minX>n?t.minX=n:t.maxX<n&&(t.maxX=n),t.minY>r?t.minY=r:t.maxY<r&&(t.maxY=r)}}(e||(e={})),function(t){function e(t){return t.a*t.d-t.b*t.c}t.empty=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},t.isEmpty=function(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.tx&&0===t.ty},t.setEmpty=function(t){t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0},t.copy=function(t,e){e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},t.concat=function(t,e,n){var r=e.a*t.a+e.b*t.c,o=e.a*t.b+e.b*t.d,i=e.c*t.a+e.d*t.c,a=e.c*t.b+e.d*t.d,u=e.tx*t.a+e.ty*t.c+t.tx,c=e.tx*t.b+e.ty*t.d+t.ty;n.a=r,n.b=o,n.c=i,n.d=a,n.tx=u,n.ty=c},t.getDeterminant=e,t.invert=function(t,n){var r=e(t);0===r?(n.a=0,n.b=0,n.c=0,n.d=0,n.tx=-t.tx,n.ty=-t.ty):(r=1/r,n.a=t.a*r,n.b=-t.b*r,n.c=-t.c*r,n.d=t.d*r,n.tx=-n.a*t.tx-n.c*t.ty,n.ty=-n.b*t.tx-n.d*t.ty)},t.transformPoint=function(t,e,n){var r=e.x,o=e.y;n.x=r*t.a+o*t.c+t.tx,n.y=r*t.b+o*t.d+t.ty},t.transformPointLocal=function(t,e,n){var r=e.x,o=e.y;n.x=r*t.a+o*t.c,n.y=r*t.b+o*t.d},t.transformInversePoint=function(t,n,r){var o=e(t);if(0===o)r.x=-t.tx,r.y=-t.ty;else{o=1/o;var i=n.x,a=n.y;r.x=o*(t.c*(t.ty-a)+t.d*(i-t.tx)),r.y=o*(t.a*(a-t.ty)+t.b*(t.tx-i))}},t.transformBounds=function(t,e,n){var r=t.a,o=t.b,i=t.c,a=t.d,u=t.tx,c=t.ty,l=e.x,s=e.y,f=l+e.width,p=s+e.height,y=l*r+s*i+u,h=l*o+s*a+c,d=f*r+s*i+u,v=f*o+s*a+c,m=f*r+p*i+u,b=f*o+p*a+c,g=l*r+p*i+u,x=l*o+p*a+c,w=y;w>d&&(w=d),w>m&&(w=m),w>g&&(w=g);var O=h;O>v&&(O=v),O>b&&(O=b),O>x&&(O=x);var k=y;k<d&&(k=d),k<m&&(k=m),k<g&&(k=g);var P=h;P<v&&(P=v),P<b&&(P=b),P<x&&(P=x),n.x=w,n.y=O,n.width=k-w,n.height=P-O}}(n||(n={})),function(t){function e(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}t.empty=function(){return{x:0,y:0}},t.length=e,t.angle=function(t){return Math.atan2(t.y,t.x)},t.isEmpty=function(t){return 0===t.x&&0===t.y},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.setEmpty=function(t){t.x=0,t.y=0},t.copy=function(t,e){e.x=t.x,e.y=t.y},t.normalize=function(t,n){var r=e(t);r>0&&(r=n/r,t.x*=r,t.y*=r)},t.distance=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},t.interpolate=function(t,e,n,r){r.x=t.x+n*(e.x-t.x),r.y=t.y+n*(e.y-t.y)},t.polar=function(t,e,n){t.x=e*Math.cos(n),t.y=e*Math.sin(n)}}(r||(r={})),function(t){t.empty=function(){return{x:0,y:0,width:0,height:0}},t.setEmpty=function(t){t.x=0,t.y=0,t.width=0,t.height=0},t.intersection=function(t,e,n){var r=t.x,o=t.y,i=t.width,a=t.height,u=e.x,c=e.y,l=e.x+e.width,s=e.y+e.height;r<u&&(i-=u-r,r=u),r+i>l&&(i=l-r),o<c&&(a-=c-o,o=c),o+a>s&&(a=s-o),i<0&&(i=0),a<0&&(a=0),n.x=r,n.y=o,n.width=i,n.height=a},t.isEmpty=function(t){return 0===t.width||0===t.height},t.contains=function(t,e){return t.x<e.x&&t.x+t.width>e.x&&t.y<e.y&&t.y+t.height>e.y},t.round=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.round(t.width),t.height=Math.round(t.height)}}(o||(o={})),function(t){t.calculateBounds=function(t,n){var r,o,i,a,u,c,l,s,f,p,y,h;switch(t.type){case"moveTo":case"lineTo":var d=t;e.test(n,null!==(r=d.x)&&void 0!==r?r:0,null!==(o=d.y)&&void 0!==o?o:0);break;case"curveTo":var v=t;e.test(n,null!==(i=v.cx)&&void 0!==i?i:0,null!==(a=v.cy)&&void 0!==a?a:0),e.test(n,null!==(u=v.x)&&void 0!==u?u:0,null!==(c=v.y)&&void 0!==c?c:0);break;case"cubicCurveTo":var m=t;e.test(n,null!==(l=m.cx)&&void 0!==l?l:0,null!==(s=m.cy)&&void 0!==s?s:0),e.test(n,null!==(f=m.sx)&&void 0!==f?f:0,null!==(p=m.sy)&&void 0!==p?p:0),e.test(n,null!==(y=m.x)&&void 0!==y?y:0,null!==(h=m.y)&&void 0!==h?h:0)}}}(i||(i={}));var s,f,p,y,h,d={M:2,m:2,L:2,l:2,H:1,h:1,V:1,v:1,C:6,c:6,S:4,s:4,Q:4,q:4,T:2,t:2},v=/[MmLlHhVvCcSsQqTt]/,m=/[-+]?[\d.]+/,b=function(){function t(){u(this,t),this.path="",this.command=null,this.buffer=[0,0,0,0,0,0],this.symbolRegex=/[MmLlHhVvCcSsQqTt]|[-+]?[\d.]+/g}return l(t,[{key:"setPath",value:function(t){this.path=t,this.symbolRegex.lastIndex=0}},{key:"getCommand",value:function(){return this.command}},{key:"getBuffer",value:function(){return this.buffer}},{key:"readNext",value:function(){var t=this.symbolRegex.lastIndex,e=this.symbolRegex.exec(this.path);if(e){var n=e[0];if(v.test(n)?this.command=n:m.test(n)?this.symbolRegex.lastIndex=t:this.command=null,this.command)for(var r=d[this.command],o=0;o<r;o++){var i=this.symbolRegex.exec(this.path);if(!i||!m.test(i[0]))break;this.buffer[o]=parseFloat(i[0])}}else this.command=null}}]),t}(),g=function(){function t(){u(this,t),this.stream=new b,this.command={type:"moveTo"},this.commandExists=!1,this.lastX=0,this.lastY=0,this.lastCX=0,this.lastCY=0}return l(t,[{key:"setPath",value:function(t){this.stream.setPath(t),this.lastX=0,this.lastY=0,this.lastCX=0,this.lastCY=0,this.commandExists=!1}},{key:"getCommand",value:function(){return this.commandExists?this.command:null}},{key:"readNext",value:function(){return this.stream.readNext(),this.parse(),this.commandExists}},{key:"parse",value:function(){var t,e,n=this.stream.getCommand();if(this.commandExists=!!n,this.commandExists){var r=(t=this.stream.getBuffer(),e=6,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],u=r[2],c=r[3],l=r[4],s=r[5];switch(n){case"M":this.command.type="moveTo";var f=this.command;f.x=o,f.y=i,this.lastX=f.x,this.lastY=f.y;break;case"m":this.command.type="moveTo";var p=this.command;p.x=o+this.lastX,p.y=i+this.lastY,this.lastX=p.x,this.lastY=p.y;break;case"L":this.command.type="lineTo";var y=this.command;y.x=o,y.y=i,this.lastX=y.x,this.lastY=y.y;break;case"l":this.command.type="lineTo";var h=this.command;h.x=o+this.lastX,h.y=i+this.lastY,this.lastX=h.x,this.lastY=h.y;break;case"H":this.command.type="lineTo";var d=this.command;d.x=o,d.y=this.lastY,this.lastX=d.x;break;case"h":this.command.type="lineTo";var v=this.command;v.x=o+this.lastX,v.y=this.lastY,this.lastX=v.x;break;case"V":this.command.type="lineTo";var m=this.command;m.x=this.lastX,m.y=o,this.lastY=m.y;break;case"v":this.command.type="lineTo";var b=this.command;b.x=this.lastX,b.y=o+this.lastY,this.lastY=b.y;break;case"C":this.command.type="cubicCurveTo";var g=this.command;g.cx=o,g.cy=i,g.sx=u,g.sy=c,g.x=l,g.y=s,this.lastCX=g.x-(g.sx-g.x),this.lastCY=g.y-(g.sy-g.y),this.lastX=g.x,this.lastY=g.y;break;case"c":this.command.type="cubicCurveTo";var x=this.command;x.cx=o+this.lastX,x.cy=i+this.lastY,x.sx=u+this.lastX,x.sy=c+this.lastY,x.x=l+this.lastX,x.y=s+this.lastY,this.lastCX=x.x-(x.sx-x.x),this.lastCY=x.y-(x.sy-x.y),this.lastX=x.x,this.lastY=x.y;break;case"S":this.command.type="cubicCurveTo";var w=this.command;w.cx=this.lastCX,w.cy=this.lastCY,w.sx=o,w.sy=i,w.x=u,w.y=c,this.lastCX=w.x-(w.sx-w.x),this.lastCY=w.y-(w.sy-w.y),this.lastX=w.x,this.lastY=w.y;break;case"s":this.command.type="cubicCurveTo";var O=this.command;O.cx=this.lastCX,O.cy=this.lastCY,O.sx=o+this.lastX,O.sy=i+this.lastY,O.x=u+this.lastX,O.y=c+this.lastY,this.lastCX=O.x-(O.sx-O.x),this.lastCY=O.y-(O.sy-O.y),this.lastX=O.x,this.lastY=O.y;break;case"Q":this.command.type="curveTo";var k=this.command;k.cx=o,k.cy=i,k.x=u,k.y=c,this.lastCX=k.x-(k.cx-k.x),this.lastCY=k.y-(k.cy-k.y),this.lastX=k.x,this.lastY=k.y;break;case"q":this.command.type="curveTo";var P=this.command;P.cx=o+this.lastX,P.cy=i+this.lastY,P.x=u+this.lastX,P.y=c+this.lastY,this.lastCX=P.x-(P.cx-P.x),this.lastCY=P.y-(P.cy-P.y),this.lastX=P.x,this.lastY=P.y;break;case"T":this.command.type="curveTo";var C=this.command;C.cx=this.lastCX,C.cy=this.lastCY,C.x=o,C.y=i,this.lastCX=C.x-(C.cx-C.x),this.lastCY=C.y-(C.cy-C.y),this.lastX=C.x,this.lastY=C.y;break;case"t":this.command.type="curveTo";var T=this.command;T.cx=this.lastCX,T.cy=this.lastCY,T.x=o+this.lastX,T.y=i+this.lastY,this.lastCX=T.x-(T.cx-T.x),this.lastCY=T.y-(T.cy-T.y),this.lastX=T.x,this.lastY=T.y}}}}]),t}(),x=new g;!function(t){t.calculateBounds=function(t,e){for(x.setPath(t);x.readNext();){var n=x.getCommand();n&&i.calculateBounds(n,e)}}}(s||(s={})),function(t){t.calculateBounds=function(t,n){var r=t.x,o=void 0===r?0:r,i=t.y,a=void 0===i?0:i,u=t.width,c=void 0===u?0:u,l=t.height,s=void 0===l?0:l;e.test(n,o,a),e.test(n,o+c,a+s)}}(f||(f={})),function(t){t.calculateBounds=function(t,n){var r=t.x,o=void 0===r?0:r,i=t.y,a=void 0===i?0:i,u=t.radius,c=void 0===u?0:u,l=t.radiusX,s=t.radiusY,f=null!=l?l:c,p=null!=s?s:c;e.test(n,o-f,a-p),e.test(n,o+f,a+p)}}(p||(p={})),function(t){t.calculateBounds=function(t,e){var n=t.data;if("string"==typeof n)s.calculateBounds(n,e);else if(Array.isArray(n))for(var r=0;r<n.length;r++){var o=n[r];i.calculateBounds(o,e)}}}(y||(y={})),function(t){t.calculateBounds=function(t,e){switch(t.type){case"rectangle":f.calculateBounds(t,e);break;case"ellipse":p.calculateBounds(t,e);break;case"path":y.calculateBounds(t,e)}}}(h||(h={}));var w,O,k="container";!function(t){t.numChildren=function(t){var e=t.children;return e?Array.isArray(e)?e.length:e.type?1:Object.keys(e).length:0}}(w||(w={})),function(t){function e(t,e){var n=t.children,r=e.renderer;if(n){var o=r.getContext();if(r.depth++,Array.isArray(n))for(var i=0;i<n.length;i++){var a=n[i];r.renderComponent(a,o)}else if(n.type){var u=n;r.renderComponent(u,o)}else for(var c=n,l=Object.keys(c),s=0;s<l.length;s++){var f=c[l[s]];r.renderComponent(f,o)}r.depth--}}function n(t,e){var n=t.children,r=e.updater;if(n){if(r.depth++,Array.isArray(n))for(var o=0;o<n.length;o++){var i=n[o];r.updateComponent(i)}else if(n.type){var a=n;r.updateComponent(a)}else for(var u=n,c=Object.keys(u),l=0;l<c.length;l++){var s=u[c[l]];r.updateComponent(s)}r.depth--}}function r(t,e){var n=t.children,r=e.pointers;if(n){var o=r.getContext();r.depth++;var i=!1;if(Array.isArray(n))for(var a=n.length-1;a>=0;a--){var u=n[a];r.dispatchComponent(u,o,i)&&(i=!0)}else if(n.type){var c=n;r.dispatchComponent(c,o,i)&&(i=!0)}else for(var l=n,s=Object.keys(l),f=s.length-1;f>=0;f--){var p=l[s[f]];r.dispatchComponent(p,o,i)&&(i=!0)}return r.depth--,i}return!1}function o(t,e){var n=t.children,r=e.keyboard;if(n){if(r.depth++,Array.isArray(n))for(var o=0;o<n.length;o++){var i=n[o];r.dispatchComponent(i)}else if(n.type){var a=n;r.dispatchComponent(a)}else for(var u=n,c=Object.keys(u),l=0;l<c.length;l++){var s=u[c[l]];r.dispatchComponent(s)}r.depth--}}function i(t,e){var n=t.children,r=e.loading;if(n){var o=r.getContext();if(r.depth++,Array.isArray(n))if(n.length){o.progress=0,o.loaded=!0;for(var i=0;i<n.length;i++){var a=n[i];r.updateComponent(a);var u=r.getContext();o.progress+=u.progress,u.loaded||(o.loaded=!1)}o.progress/=n.length}else o.progress=1;else if(n.type){var c=n;r.updateComponent(c);var l=r.getContext();o.progress=l.progress,o.loaded=l.loaded}else{var s=n,f=Object.keys(s);if(f.length){o.progress=0,o.loaded=!0;for(var p=0;p<f.length;p++){var y=s[f[p]];r.updateComponent(y);var h=r.getContext();o.progress+=h.progress,h.loaded||(o.loaded=!1)}o.progress/=f.length}else o.progress=1,o.loaded=!0}r.depth--}}t.render=e,t.update=n,t.hitTest=r,t.keyTest=o,t.loaded=i,t.init=function(t){t.components.update.set(k,n),t.components.render.set(k,e),t.components.hitTest.set(k,r),t.components.keyTest.set(k,o),t.components.loaded.set(k,i)}}(O||(O={}));var P,C,T,S,M="loader";!function(t){t.getLoadingProgress=function(t){var e;return null!==(e=t.loadingProgress)&&void 0!==e?e:0},t.isLoaded=function(t){var e;return null!==(e=t.loaded)&&void 0!==e&&e},t.needLoadingCheck=function(t){var e;return null===(e=t.loadingCheck)||void 0===e||e}}(P||(P={})),function(t){function e(t,e){if(P.needLoadingCheck(t)){O.loaded(t,e);var n=e.loading.getContext();t.loadingProgress=n.progress,n.loaded&&!t.loaded&&(t.loaded=!0,t.onLoaded&&t.onLoaded())}}t.loaded=e,t.init=function(t){t.components.update.set(M,O.update),t.components.render.set(M,O.render),t.components.hitTest.set(M,O.hitTest),t.components.loaded.set(M,e)}}(C||(C={})),function(t){t.isVisible=function(t){var e;return null===(e=t.visible)||void 0===e||e}}(T||(T={})),function(t){t.getMatrix=function(t,e){var n,r,o,i,a,u,c,l,s,f,p,y,h=t.matrix;if(h)return e.a=null!==(c=h.a)&&void 0!==c?c:1,e.b=null!==(l=h.b)&&void 0!==l?l:0,e.c=null!==(s=h.c)&&void 0!==s?s:0,e.d=null!==(f=h.d)&&void 0!==f?f:1,e.tx=null!==(p=h.tx)&&void 0!==p?p:0,void(e.ty=null!==(y=h.ty)&&void 0!==y?y:0);var d=t.rotation,v=null!==(n=null!==(r=t.scaleX)&&void 0!==r?r:t.scale)&&void 0!==n?n:1,m=null!==(o=null!==(i=t.scaleY)&&void 0!==i?i:t.scale)&&void 0!==o?o:1;if(e.tx=null!==(a=t.x)&&void 0!==a?a:0,e.ty=null!==(u=t.y)&&void 0!==u?u:0,d){var b=Math.cos(d),g=Math.sin(d);return e.a=b*v,e.b=g*v,e.c=-g*m,void(e.d=b*m)}e.a=v,e.b=0,e.c=0,e.d=m},t.getColorTransform=function(t,e){var n,r,o,i,a,u,c,l,s,f=t.colorTransform;if(f)return e.alphaMultiplier=null!==(r=f.alphaMultiplier)&&void 0!==r?r:1,e.redMultiplier=null!==(o=f.redMultiplier)&&void 0!==o?o:1,e.greenMultiplier=null!==(i=f.greenMultiplier)&&void 0!==i?i:1,e.blueMultiplier=null!==(a=f.blueMultiplier)&&void 0!==a?a:1,e.alphaOffset=null!==(u=f.alphaOffset)&&void 0!==u?u:0,e.redOffset=null!==(c=f.redOffset)&&void 0!==c?c:0,e.greenOffset=null!==(l=f.greenOffset)&&void 0!==l?l:0,void(e.blueOffset=null!==(s=f.blueOffset)&&void 0!==s?s:0);var p=null!==(n=t.alpha)&&void 0!==n?n:1,y=t.tint;if(y){var h=y.color,d=void 0===h?0:h,v=y.value,m=void 0===v?1:v,b=1-m,g=d>>16&255,x=d>>8&255,w=255&d;return e.alphaMultiplier=p,e.redMultiplier=b,e.greenMultiplier=b,e.blueMultiplier=b,e.alphaOffset=0,e.redOffset=g*m,e.greenOffset=x*m,void(e.blueOffset=w*m)}var O=t.brightness;if(void 0!==O){O>1?O=1:O<-1&&(O=-1);var k=1-Math.abs(O),P=0;return O>0&&(P=255*O),e.alphaMultiplier=p,e.redMultiplier=k,e.greenMultiplier=k,e.blueMultiplier=k,e.alphaOffset=0,e.redOffset=P,e.greenOffset=P,void(e.blueOffset=P)}e.alphaMultiplier=p,e.redMultiplier=1,e.greenMultiplier=1,e.blueMultiplier=1,e.alphaOffset=0,e.redOffset=0,e.greenOffset=0,e.blueOffset=0}}(S||(S={}));var _=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B,L=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(c,e);var r,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(i);if(a){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Y(this,t)});function c(){var t;return j(this,c),(t=u.apply(this,arguments)).depth=0,t.elapsedTime=0,t.enabled=!0,t.contexts=[],t}return r=c,(o=[{key:"getContext",value:function(){var e=this.contexts[this.depth];return e||(e={matrix:n.empty(),colorTransform:t.empty()},this.contexts[this.depth]=e),e}},{key:"renderComponent",value:function(e,r){if(!(this.depth>this.engine.depth)&&T.isVisible(e)){var o=this.getContext();S.getMatrix(e,o.matrix),S.getColorTransform(e,o.colorTransform),n.concat(r.matrix,o.matrix,o.matrix),t.concat(r.colorTransform,o.colorTransform,o.colorTransform);var i=this.engine.components.render.get(e.type);i&&i(e,this.engine)}}},{key:"render",value:function(){if(this.enabled){var e=this.engine.root;if(e){var r=performance.now();this.engine.platform.begin(),this.depth=0;var o=this.getContext();this.depth++,n.copy(this.engine.screen.getMatrix(),o.matrix),t.setEmpty(o.colorTransform),this.renderComponent(e,o),this.engine.platform.end(),this.elapsedTime=performance.now()-r}}}}])&&R(r.prototype,o),c}(_);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isEnabled=function(t){var e;return null===(e=t.enabled)||void 0===e||e},t.update=function(t,e){t.onUpdate&&t.onUpdate(e)}}(B||(B={}));var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(r);if(o){var n=W(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return D(this,t)});function a(){var t;return I(this,a),(t=i.apply(this,arguments)).depth=0,t.time=0,t.elapsedTime=0,t.enabled=!0,t}return e=a,(n=[{key:"update",value:function(t){if(this.enabled){var e=this.engine.root;if(e){this.depth=0,this.time=t;var n=performance.now();this.updateComponent(e),this.elapsedTime=performance.now()-n}}}},{key:"updateComponent",value:function(t){if(!(this.depth>this.engine.depth)&&B.isEnabled(t)){this.updateProperties(t),B.update(t,this.time);var e=this.engine.components.update.get(t.type);e&&e(t,this.engine)}}},{key:"updateProperties",value:function(t){var e=this;this.engine.components.properties.forEach((function(n,r){t[r]&&n(t,e.engine)}))}}])&&U(e.prototype,n),a}(_);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function z(t,e){return!e||"object"!==H(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J,$=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Q(r);if(o){var n=Q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return z(this,t)});function a(){var t;return q(this,a),(t=i.apply(this,arguments)).depth=0,t.elapsedTime=0,t.enabled=!0,t.contexts=[],t}return e=a,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={progress:0,loaded:!1},this.contexts[this.depth]=t),t}},{key:"updateComponent",value:function(t){var e=this.getContext();if(e.progress=1,e.loaded=!0,!(this.depth>this.engine.depth)){var n=this.engine.components.loaded.get(t.type);n&&n(t,this.engine)}}},{key:"update",value:function(){if(this.enabled){var t=this.engine.root;if(t){var e=performance.now();this.depth=0,this.updateComponent(t),this.elapsedTime=performance.now()-e}}}}])&&G(e.prototype,n),a}(_),Z={pointerDown:"onPointerDown",pointerUp:"onPointerUp",pointerMove:"onPointerMove",pointerCancel:"onPointerCancel",pointerOver:"onPointerOver",pointerOut:"onPointerOut"};function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ot(t,e){return!e||"object"!==tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isPointerEnabled=function(t){var e;return null===(e=t.pointerEnabled)||void 0===e||e},t.dispatchEvent=function(t,e,n,r,o,i,a){var u=Z[e];if(u&&t[u]){var c={type:e,x:n,y:r,globalX:o,globalY:i,id:a};t[u](c)}}}(J||(J={}));var at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}(c,t);var e,o,i,a,u=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=it(i);if(a){var n=it(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ot(this,t)});function c(){var t;return et(this,c),(t=u.apply(this,arguments)).depth=0,t.enabled=!0,t.global=r.empty(),t.local=r.empty(),t.pointerId=0,t.pointerType="pointerDown",t.contexts=[],t}return e=c,(o=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={matrix:n.empty()},this.contexts[this.depth]=t),t}},{key:"dispatch",value:function(t,e,r,o){if(this.enabled){var i=this.engine.root;if(i){this.local.x=e,this.local.y=r,this.global.x=e,this.global.y=r,this.pointerId=o,this.pointerType=t,this.depth=0;var a=this.getContext();n.setEmpty(a.matrix),this.depth++,this.dispatchComponent(i,a,!1)}}}},{key:"updateLocal",value:function(t,e){var r=this.getContext();S.getMatrix(t,r.matrix),n.concat(e.matrix,r.matrix,r.matrix),n.transformInversePoint(r.matrix,this.global,this.local)}},{key:"dispatchComponent",value:function(t,e,n){if(this.depth>this.engine.depth)return!1;if(!T.isVisible(t))return!1;if(!J.isPointerEnabled(t))return!1;if(n){if(t.pointerOver&&"pointerMove"===this.pointerType){this.updateLocal(t,e);var r=this.local,o=r.x,i=r.y;J.dispatchEvent(t,"pointerOut",o,i,this.global.x,this.global.y,this.pointerId),t.pointerOver=!1}return!1}var a=this.engine.components.hitTest.get(t.type);if(a){this.updateLocal(t,e);var u=this.local,c=u.x,l=u.y,s=a(t,this.engine);return s&&J.dispatchEvent(t,this.pointerType,c,l,this.global.x,this.global.y,this.pointerId),"pointerMove"===this.pointerType&&(s&&!t.pointerOver?J.dispatchEvent(t,"pointerOver",c,l,this.global.x,this.global.y,this.pointerId):!s&&t.pointerOver&&J.dispatchEvent(t,"pointerOut",c,l,this.global.x,this.global.y,this.pointerId),t.pointerOver=s),s}return!1}}])&&nt(e.prototype,o),c}(_);function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ct=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frameRate=0,this.paused=!0,this.time=0,this.update=function(t){n.paused||(n.engine.updater.update(t),n.engine.loading.update(),n.engine.renderer.render())},this.updateFrame=function(){var t=performance.now(),e=(t-n.time)/1e3;n.time=t,n.update(e),n.updateNextFrame()},this.engine=e}var e,n;return e=t,(n=[{key:"isPaused",get:function(){return this.paused}},{key:"play",value:function(){this.paused&&(this.time=performance.now(),this.paused=!1,this.updateNextFrame())}},{key:"pause",value:function(){this.paused=!1}},{key:"updateNextFrame",value:function(){requestAnimationFrame(this.updateFrame)}}])&&ut(e.prototype,n),t}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e){return(pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt,vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ht(r);if(o){var n=ht(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return yt(this,t)});function a(){var t;return st(this,a),(t=i.apply(this,arguments)).infos=new Map,t.errors=new Map,t.warnings=new Map,t.enabled=!0,t}return e=a,(n=[{key:"log",value:function(){var t;this.enabled&&(t=console).log.apply(t,arguments)}},{key:"info",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,o=String(e),i=this.infos.get(o);i||(i=0,(r=console).info.apply(r,e)),i++,this.infos.set(o,i)}}},{key:"error",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,o=String(e),i=this.errors.get(o);i||(i=0,(r=console).error.apply(r,e)),i++,this.errors.set(o,i)}}},{key:"warning",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,o=String(e),i=this.warnings.get(o);i||(i=0,(r=console).warn.apply(r,e)),i++,this.warnings.set(o,i)}}}])&&ft(e.prototype,n),a}(_);function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.getProgress=function(t){return t?t.loaded?1:t.bytesTotal>0?t.bytesLoaded/t.bytesTotal:0:0}}(dt||(dt={}));var Pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(r);if(o){var n=kt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ot(this,t)});function a(){var t;return gt(this,a),(t=i.apply(this,arguments)).resources=new Map,t.resolvers=new Set,t}return e=a,(n=[{key:"get",value:function(t){if(!t)return null;var e=this.resources.get(t);return e||(e=this.resolve(t),this.resources.set(t,e)),e}},{key:"resolve",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.resolvers);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)(t,this.engine);if(r)return r}}catch(t){n.e(t)}finally{n.f()}return this.engine.debug.warning("Resource not resolved: ".concat(t)),null}}])&&xt(e.prototype,n),a}(_);function Ct(t){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t,e){return!e||"object"!==Ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(t){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et,jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=_t(e);if(n){var o=_t(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Mt(this,t)});function o(){var t;return Tt(this,o),(t=r.apply(this,arguments)).properties=new Map,t.render=new Map,t.update=new Map,t.hitTest=new Map,t.keyTest=new Map,t.loaded=new Map,t}return o}(_),Rt={keyDown:"onKeyDown",keyPress:"onKeyPress",keyUp:"onKeyUp"};function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isKeyEnabled=function(t){var e;return null===(e=t.keyEnabled)||void 0===e||e},t.dispatchEvent=function(t,e){var n=Rt[e.type];n&&t[n]&&t[n](e)}}(Et||(Et={}));var It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nt(r);if(o){var n=Nt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Lt(this,t)});function a(){var t;return Yt(this,a),(t=i.apply(this,arguments)).depth=0,t.enabled=!0,t}return e=a,(n=[{key:"dispatch",value:function(t){if(this.enabled){var e=this.engine.root;e&&(this.keyEvent=t,this.depth=0,this.dispatchComponent(e))}}},{key:"dispatchComponent",value:function(t){if(!(this.depth>this.engine.depth)&&Et.isKeyEnabled(t)){var e=this.engine.components.keyTest.get(t.type);e&&e(t,this.engine),Et.dispatchEvent(t,this.keyEvent)}}}])&&At(e.prototype,n),a}(_),Ut=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.depth=32,this.components=new jt(this),this.updater=new F(this),this.loading=new $(this),this.renderer=new L(this),this.pointers=new at(this),this.keyboard=new It(this),this.ticker=new ct(this),this.debug=new vt(this),this.resources=new Pt(this),O.init(this),C.init(this)};function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ht(e);if(n){var o=Ht(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ft(this,t)});function o(){return Dt(this,o),r.apply(this,arguments)}return o}(_);function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jt(t,e){return!e||"object"!==Gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zt,te,ee,ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}(u,t);var e,r,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$t(o);if(i){var n=$t(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Jt(this,t)});function u(){var t;return Kt(this,u),(t=a.apply(this,arguments)).width=400,t.height=400,t.pixelRatio=0,t.fullscreen=!1,t.matrix=n.empty(),t}return e=u,(r=[{key:"getMatrix",value:function(){var t=this.getPixelRatio();return this.matrix.a=t,this.matrix.d=t,this.matrix}},{key:"getWidth",value:function(){return this.fullscreen?this.getWindowWidth():this.width}},{key:"getHeight",value:function(){return this.fullscreen?this.getWindowHeight():this.height}},{key:"getPixelRatio",value:function(){return this.pixelRatio>0?this.pixelRatio:this.getWindowPixelRatio()}}])&&zt(e.prototype,r),u}(_);function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){t.getX=function(t,e){var n=t.pivotX;return n?-n*e:0},t.getY=function(t,e){var n=t.pivotY;return n?-n*e:0},t.hasValues=function(t){var e=t.pivotX,n=t.pivotY;return!!e||!!n}}(Zt||(Zt={})),function(t){function e(t,e){switch(t.split(".").pop()){case"png":case"jpg":case"webp":var n={asset:t,loaded:!1,bytesLoaded:0,bytesTotal:0},r=document.createElement("img");return r.src=t,r.onload=function(){e.debug.log("image loaded: ".concat(t)),n.image=r,n.loaded=!0},r.onerror=function(t){e.debug.warning("image load error",t)},n}return null}t.resolve=e,t.init=function(t){t.resources.resolvers.add(e)}}(te||(te={})),function(t){function e(t,e){switch(t.split(".").pop()){case"txt":case"json":var n={asset:t,loaded:!1,bytesLoaded:0,bytesTotal:0},r=new XMLHttpRequest;return r.open("GET",t,!0),r.onprogress=function(t){n.bytesLoaded=t.loaded,n.bytesTotal=t.total},r.onload=function(){e.debug.log("string loaded: ".concat(t)),n.data=r.responseText,n.loaded=!0,n.bytesLoaded=n.bytesTotal},r.onerror=function(t){e.debug.warning("string load error",t)},r.send(),n}return null}t.resolve=e,t.init=function(t){t.resources.resolvers.add(e)}}(ee||(ee={}));var oe,ie="shape",ae=e.empty();!function(t){t.calculateBounds=function(t,n){var r=t.data;if(r){if(e.setEmpty(ae),Array.isArray(r))for(var i=0;i<r.length;i++)h.calculateBounds(r[i],ae);else{if("object"!==re(r))return void o.setEmpty(n);h.calculateBounds(r,ae)}if(e.isEmpty(ae))o.setEmpty(n);else{var a=ae.maxX-ae.minX,u=ae.maxY-ae.minY,c=ae.minX+Zt.getX(t,a),l=ae.minY+Zt.getY(t,u);n.x=c,n.y=l,n.width=a,n.height=u}}else o.setEmpty(n)}}(oe||(oe={}));var ue,ce=o.empty();function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){function e(t,e){var n=e.pointers.local;return oe.calculateBounds(t,ce),o.contains(ce,n)}t.hitTest=e,t.init=function(t){t.components.hitTest.set(ie,e),te.init(t)}}(ue||(ue={}));var fe=r.empty(),pe=r.empty(),ye=n.empty(),he=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shape=e}var e,r;return e=t,(r=[{key:"beginFill",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.fill={type:"solid",color:t,alpha:e},this}},{key:"beginBitmapFill",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.fill={type:"bitmap",src:t,matrix:e,repeat:n,smooth:r},this}},{key:"beginGradientFill",value:function(t,e,r,o,i){return"linear"===t?(fe.x=-819.2,fe.y=0,pe.x=819.2,pe.y=0,n.transformPoint(i,fe,fe),n.transformPoint(i,pe,pe),this.fill={type:t,color:e,alpha:r,ratio:o,beginX:fe.x,beginY:fe.y,endX:pe.x,endY:pe.y}):(fe.x=1638.4,fe.y=0,n.transformPoint(i,fe,fe),this.fill={type:t,color:e,alpha:r,ratio:o,beginX:fe.x,beginY:fe.y,beginRadius:0,endX:fe.x,endY:fe.y,endRadius:Math.abs((fe.x-i.tx)/2)}),this}},{key:"lineStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"round",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"round",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3;return this.stroke={thickness:t,pixelHinting:r,scaleMode:o,caps:i,joints:a,miterLimit:u,fill:{type:"solid",color:e,alpha:n}},this}},{key:"lineGradientStyle",value:function(t,e,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye;return this.stroke?("linear"===t?(fe.x=-819.2,fe.y=0,pe.x=819.2,pe.y=0,n.transformPoint(i,fe,fe),n.transformPoint(i,pe,pe),this.stroke.fill={type:t,color:e,alpha:r,ratio:o,beginX:fe.x,beginY:fe.y,endX:pe.x,endY:pe.y}):(fe.x=1638.4,fe.y=0,n.transformPoint(i,fe,fe),this.stroke.fill={type:t,color:e,alpha:r,ratio:o,beginX:fe.x,beginY:fe.y,beginRadius:0,endX:fe.x,endY:fe.y,endRadius:Math.abs((fe.x-i.tx)/2)}),this):this}},{key:"lineBitmapStyle",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.stroke?(this.stroke.fill={type:"bitmap",src:t,matrix:e,repeat:n,smooth:r},this):this}},{key:"moveTo",value:function(t,e){return this.beginPath().push({type:"moveTo",x:t,y:e}),this}},{key:"lineTo",value:function(t,e){var n=this.getPath();return n?(n.push({type:"lineTo",x:t,y:e}),this):this}},{key:"curveTo",value:function(t,e,n,r){var o=this.getPath();return o?(o.push({type:"curveTo",cx:t,cy:e,x:n,y:r}),this):this}},{key:"cubicCurveTo",value:function(t,e,n,r,o,i){var a=this.getPath();return a?(a.push({type:"cubicCurveTo",cx:t,cy:e,sx:n,sy:r,x:o,y:i}),this):this}},{key:"drawRoundRect",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=this.beginPath(),u=o,c=i,l=.5522848,s=u/2*l,f=c/2*l,p=t+u,y=e+c,h=t+u/2,d=e+c/2,v=n-u,m=r-c;return a.push({type:"moveTo",x:t,y:d}),a.push({type:"cubicCurveTo",cx:t,cy:d-f,sx:h-s,sy:e,x:h,y:e}),a.push({type:"lineTo",x:h+v,y:e}),a.push({type:"cubicCurveTo",cx:h+s+v,cy:e,sx:p+v,sy:d-f,x:p+v,y:d}),a.push({type:"lineTo",x:p+v,y:d+m}),a.push({type:"cubicCurveTo",cx:p+v,cy:d+f+m,sx:h+s+v,sy:y+m,x:h+v,y:y+m}),a.push({type:"lineTo",x:h,y:y+m}),a.push({type:"cubicCurveTo",cx:h-s,cy:y+m,sx:t,sy:d+f+m,x:t,y:d+m}),this}},{key:"drawRect",value:function(t,e,n,r){var o=this.createData();return o.type="rectangle",o.x=t,o.y=e,o.width=n,o.height=r,this}},{key:"drawCircle",value:function(t,e,n){var r=this.createData();return r.type="ellipse",r.x=t,r.y=e,r.radius=n,this}},{key:"drawEllipse",value:function(t,e,n,r){var o=this.createData();return o.type="ellipse",o.radiusX=n/2,o.radiusY=r/2,o.x=t-o.radiusX,o.y=e-o.radiusY,this}},{key:"clear",value:function(){return delete this.shape.data,this}},{key:"createData",value:function(){var t=this.shape,e=this.fill,n=this.stroke;Array.isArray(t.data)||("object"===le(t.data)?t.data=[t.data]:t.data=[]);var r={type:"path",fill:e,stroke:n};return t.data.push(r),r}},{key:"beginPath",value:function(){var t=this.createData();return t.data=[],t.data}},{key:"getPath",value:function(){var t=this.shape;if(Array.isArray(t.data)&&t.data.length){var e=t.data[t.data.length-1];if(Array.isArray(e.data))return e.data}}}])&&se(e.prototype,r),t}(),de=2*Math.PI;function ve(t,e){var n,r,o,i,a,u,c,l,s,f,p,y,h,d;switch(t.type){case"moveTo":var v=t;e.moveTo(null!==(n=v.x)&&void 0!==n?n:0,null!==(r=v.y)&&void 0!==r?r:0);break;case"lineTo":var m=t;e.lineTo(null!==(o=m.x)&&void 0!==o?o:0,null!==(i=m.y)&&void 0!==i?i:0);break;case"curveTo":var b=t;e.quadraticCurveTo(null!==(a=b.cx)&&void 0!==a?a:0,null!==(u=b.cy)&&void 0!==u?u:0,null!==(c=b.x)&&void 0!==c?c:0,null!==(l=b.y)&&void 0!==l?l:0);break;case"cubicCurveTo":var g=t;e.bezierCurveTo(null!==(s=g.cx)&&void 0!==s?s:0,null!==(f=g.cy)&&void 0!==f?f:0,null!==(p=g.sx)&&void 0!==p?p:0,null!==(y=g.sy)&&void 0!==y?y:0,null!==(h=g.x)&&void 0!==h?h:0,null!==(d=g.y)&&void 0!==d?d:0)}}var me,be=new g;function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ke(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(e){function n(e,n,r){var o=e>>16&255,i=e>>8&255,a=255&e,u=255*n;return t.isEmpty(r)||(o=o*r.redMultiplier+r.redOffset&255,i=i*r.greenMultiplier+r.greenOffset&255,a=a*r.blueMultiplier+r.blueOffset&255,u=u*r.alphaMultiplier+r.alphaOffset&255),u<255?"rgba(".concat(o,", ").concat(i,", ").concat(a,", ").concat(u/255,")"):"rgb(".concat(o,", ").concat(i,", ").concat(a,")")}function r(t,e,r,o,i){for(var a=0;a<e.length;a++){var u=e[a],c=r[a],l=o[a];l<0&&(l=0),l>1&&(l=1);var s=n(u,c,i);t.addColorStop(l,s)}}e.colorPattern=n,e.addGradientColors=r,e.radialGradientPattern=function(t,e,n,o,i,a,u,c,l,s,f){var p=f.createRadialGradient(t,e,n,o,i,a);return r(p,u,c,l,s),p},e.linearGradientPattern=function(t,e,n,o,i,a,u,c,l){var s=l.createLinearGradient(t,e,n,o);return r(s,i,a,u,c),s},e.bitmapPattern=function(t,e,n,r){var o=r.createPattern(t,e?"repeat":"none");if(o){var i,a,u,c,l,s,f=new DOMMatrix;return f.a=null!==(i=n.a)&&void 0!==i?i:1,f.b=null!==(a=n.b)&&void 0!==a?a:0,f.c=null!==(u=n.c)&&void 0!==u?u:0,f.d=null!==(c=n.d)&&void 0!==c?c:1,f.e=null!==(l=n.tx)&&void 0!==l?l:0,f.f=null!==(s=n.ty)&&void 0!==s?s:0,o.setTransform(f),o}return""}}(me||(me={}));var Ce,Te,Se,Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pe(r);if(o){var n=Pe(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ke(this,t)});function a(){return xe(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"getWindowWidth",value:function(){return window.innerWidth}},{key:"getWindowHeight",value:function(){return window.innerHeight}},{key:"getWindowPixelRatio",value:function(){var t;return null!==(t=window.devicePixelRatio)&&void 0!==t?t:1}}])&&we(e.prototype,n),a}(ne);function _e(t,e,n){var r={type:n,key:e.key,code:e.code,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,repeat:e.repeat};t.keyboard.dispatch(r),e.preventDefault()}function Ee(t,e,n){var r=t.platform.view,o=r.getBoundingClientRect(),i=e.clientX-o.left-r.clientLeft,a=e.clientY-o.top-r.clientTop;t.pointers.dispatch(n,i,a,0),e.preventDefault()}function je(t,e,n){for(var r=t.platform.view,o=r.getBoundingClientRect(),i=0;i<e.changedTouches.length;i++){var a=e.changedTouches[i],u=a.clientX-o.left-r.clientLeft,c=a.clientY-o.top-r.clientTop;t.pointers.dispatch(n,u,c,a.identifier)}e.preventDefault()}function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ye(t,e){return(Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ae(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Be(t){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t,e){return!e||"object"!==Le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.init=function(t){document.addEventListener("keydown",(function(e){_e(t,e,"keyDown")})),document.addEventListener("keypress",(function(e){_e(t,e,"keyPress")})),document.addEventListener("keyup",(function(e){_e(t,e,"keyUp")}))}}(Ce||(Ce={})),function(t){t.init=function(t){var e=t.platform.view;e.addEventListener("mousedown",(function(e){Ee(t,e,"pointerDown")})),e.addEventListener("mouseup",(function(e){Ee(t,e,"pointerUp")})),e.addEventListener("mousemove",(function(e){Ee(t,e,"pointerMove")})),e.addEventListener("mouseleave",(function(e){Ee(t,e,"pointerCancel")}))}}(Te||(Te={})),function(t){t.init=function(t){var e=t.platform.view;e.addEventListener("touchstart",(function(e){je(t,e,"pointerDown")})),e.addEventListener("touchend",(function(e){je(t,e,"pointerUp")})),e.addEventListener("touchmove",(function(e){je(t,e,"pointerMove")})),e.addEventListener("touchcancel",(function(e){je(t,e,"pointerCancel")}))}}(Se||(Se={}));var We=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=De(r);if(o){var n=De(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ve(this,t)});function a(){var t;return Ne(this,a),(t=i.apply(this,arguments)).view=document.createElement("canvas"),t.contexts=[t.view.getContext("2d")],t.customContexts=[],t}return e=a,(n=[{key:"getContext",value:function(){return this.contexts[this.contexts.length-1]}},{key:"saveContext",value:function(t){this.contexts.push(t)}},{key:"restoreContext",value:function(){this.contexts.length>1?this.contexts.pop():this.engine.debug.warning("Trying to restore main context")}},{key:"createCustomContext",value:function(){var t;t=this.customContexts.length?this.customContexts.pop():document.createElement("canvas").getContext("2d");var e=this.view,n=e.width,r=e.height;return t.canvas.width!==n&&(t.canvas.width=n),t.canvas.height!==r&&(t.canvas.height=r),t}},{key:"destroyCustomContext",value:function(t){this.customContexts.push(t)}},{key:"begin",value:function(){this.clear(),this.updateSize()}},{key:"end",value:function(){}},{key:"clear",value:function(){var t=this.view,e=this.getContext();e.setTransform(),e.clearRect(0,0,t.width,t.height)}},{key:"updateSize",value:function(){var t=this.engine.screen.getWidth(),e=this.engine.screen.getHeight(),n=this.engine.screen.getPixelRatio(),r=Math.floor(t*n),o=Math.floor(e*n),i=this.view;i.width===r&&i.height===o||(i.width=r,i.height=o,i.style.width="".concat(t,"px"),i.style.height="".concat(e,"px"))}}])&&Ie(e.prototype,n),a}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ye(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Be(e);if(n){var o=Be(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ae(this,t)});function o(){return Xe(this,o),r.apply(this,arguments)}return o}(qt));function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){return(He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qe(t,e){return!e||"object"!==Fe(e)&&"function"!=typeof e?Ge(t):e}function Ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ke(t){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ze=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Ke(e);if(n){var o=Ke(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return qe(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).platform=new We(Ge(t)),t.screen=new Me(Ge(t)),t}return o}(Ut);function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Je=[],$e=n.empty();function Ze(t,e,n,r){var o,i,a,u,c,l,s,f,p,y,h,d,v,m,b,g,x,w,O,k;if("number"==typeof t)return me.colorPattern(t,1,e);if("object"===Qe(t))switch(t.type){case"solid":var P=t;return me.colorPattern(null!==(o=P.color)&&void 0!==o?o:0,null!==(i=P.alpha)&&void 0!==i?i:1,e);case"linear":var C=t;return me.linearGradientPattern(null!==(a=C.beginX)&&void 0!==a?a:0,null!==(u=C.beginY)&&void 0!==u?u:0,null!==(c=C.endX)&&void 0!==c?c:0,null!==(l=C.endY)&&void 0!==l?l:0,null!==(s=C.colors)&&void 0!==s?s:Je,null!==(f=C.alphas)&&void 0!==f?f:Je,null!==(p=C.ratios)&&void 0!==p?p:Je,e,n);case"radial":var T=t;return me.radialGradientPattern(null!==(y=T.beginX)&&void 0!==y?y:0,null!==(h=T.beginY)&&void 0!==h?h:0,null!==(d=T.beginRadius)&&void 0!==d?d:0,null!==(v=null!==(m=T.endX)&&void 0!==m?m:T.beginX)&&void 0!==v?v:0,null!==(b=null!==(g=T.endY)&&void 0!==g?g:T.beginY)&&void 0!==b?b:0,null!==(x=T.endRadius)&&void 0!==x?x:0,null!==(w=T.colors)&&void 0!==w?w:Je,null!==(O=T.alphas)&&void 0!==O?O:Je,null!==(k=T.ratios)&&void 0!==k?k:Je,e,n);case"bitmap":var S=t,M=S.repeat,_=void 0===M||M,E=S.src,j=S.matrix,R=void 0===j?$e:j,X=S.fallback;if(!E)return"transparent";var Y=r.resources.get(E);return null!=Y&&Y.image?me.bitmapPattern(Y.image,_,R,n):X?Ze(X,e,n,r):"transparent";default:return"transparent"}return""}function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var en,nn=o.empty(),rn=r.empty();function on(t,e,n,r){var o=t.fill,i=t.stroke,a=!!o||0===o,u=!!i||0===i;if(a||u){var c=!0;switch(t.type){case"rectangle":c=function(t,e,n){var r=t.x,o=void 0===r?0:r,i=t.y,a=void 0===i?0:i,u=t.width,c=void 0===u?0:u,l=t.height,s=void 0===l?0:l;return 0!==c&&0!==s&&(n.beginPath(),n.rect(o,a,c,s),e&&n.closePath(),!0)}(t,a,n);break;case"ellipse":c=function(t,e,n){var r=t.x,o=void 0===r?0:r,i=t.y,a=void 0===i?0:i,u=t.radius,c=void 0===u?0:u,l=t.radiusX,s=t.radiusY,f=null!=l?l:c,p=null!=s?s:c;return 0!==f&&0!==p&&(n.beginPath(),n.ellipse(o,a,f,p,0,0,de),e&&n.closePath(),!0)}(t,a,n);break;case"path":var l=t;c="string"==typeof l.data?function(t,e,n){if(!t.length)return!1;for(n.beginPath(),be.setPath(t);be.readNext();){var r=be.getCommand();r&&ve(r,n)}return e&&n.closePath(),!0}(l.data,a,n):!!Array.isArray(l.data)&&function(t,e,n){if(!t.length)return!1;n.beginPath();for(var r=0;r<t.length;r++)ve(t[r],n);return e&&n.closePath(),!0}(l.data,a,n)}c&&(a&&(function(t,e,n,r){n.fillStyle=Ze(t,e,n,r)}(o,e,n,r),n.fill()),u&&(function(t,e,n,r){if("number"==typeof t)n.strokeStyle=me.colorPattern(t,1,e),n.lineWidth=1,n.lineCap="round",n.lineJoin="round",n.miterLimit=10;else if("object"===Qe(t)&&void 0!==t.fill){var o,i,a,u;n.strokeStyle=Ze(t.fill,e,n,r),n.lineWidth=null!==(o=t.thickness)&&void 0!==o?o:1,n.lineCap=null!==(i=t.caps)&&void 0!==i?i:"round",n.lineJoin=null!==(a=t.joints)&&void 0!==a?a:"round",n.miterLimit=null!==(u=t.miterLimit)&&void 0!==u?u:10}}(i,e,n,r),n.stroke()))}}!function(t){function e(t,e){var i=t.data;if(i){var a=e.renderer.getContext(),u=a.colorTransform;if(!(u.alphaMultiplier<=0)){if(r.setEmpty(rn),Zt.hasValues(t)){if(oe.calculateBounds(t,nn),o.isEmpty(nn))return;rn.x=Zt.getX(t,nn.width),rn.y=Zt.getY(t,nn.width)}var c=e.platform.getContext();c.globalAlpha=1;var l=a.matrix;if(r.isEmpty(rn)&&n.transformPointLocal(l,rn,rn),c.setTransform(l.a,l.b,l.c,l.d,l.tx+rn.x,l.ty+rn.y),Array.isArray(i))for(var s=0;s<i.length;s++)on(i[s],u,c,e);else"object"===tn(i)&&on(i,u,c,e)}}}t.render=e,t.init=function(t){ue.init(t),t.components.render.set(ie,e)}}(en||(en={}));const an=new ze;en.init(an),an.screen.fullscreen=!0,an.ticker.play(),document.body.appendChild(an.platform.view),an.root={type:ie,x:150,y:150,value:0,onUpdate(t){this.graphics||(this.graphics=new he(this)),this.value-=5*t;const{graphics:e,value:n}=this,r=10*Math.cos(n),o=10*Math.sin(n);e.clear().beginFill(16711680).lineStyle(4,153).moveTo(-100+r,-70+o).lineTo(100+o,-70+r).lineTo(100+r,70+o).lineTo(-100+o,70+r).lineTo(-100+r,-70+o)}}})();