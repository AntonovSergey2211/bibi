(()=>{"use strict";var t,e,n="container";!function(t){t.numChildren=function(t){var e=t.children;return e?Array.isArray(e)?e.length:e.type?1:Object.keys(e).length:0}}(t||(t={})),function(t){function e(t,e){var n=t.children,r=e.renderer;if(n){var i=r.getContext();if(r.depth++,Array.isArray(n))for(var o=0;o<n.length;o++){var a=n[o];r.renderComponent(a,i)}else if(n.type){var l=n;r.renderComponent(l,i)}else for(var u=n,c=Object.keys(u),f=0;f<c.length;f++){var s=u[c[f]];r.renderComponent(s,i)}r.depth--}}function r(t,e){var n=t.children,r=e.updater;if(n){if(r.depth++,Array.isArray(n))for(var i=0;i<n.length;i++){var o=n[i];r.updateComponent(o)}else if(n.type){var a=n;r.updateComponent(a)}else for(var l=n,u=Object.keys(l),c=0;c<u.length;c++){var f=l[u[c]];r.updateComponent(f)}r.depth--}}function i(t,e){var n=t.children,r=e.pointers;if(n){var i=r.getContext();if(r.depth++,Array.isArray(n))for(var o=n.length-1;o>=0;o--){var a=n[o];if(r.dispatchComponent(a,i))return!0}else if(n.type){var l=n;if(r.dispatchComponent(l,i))return!0}else for(var u=n,c=Object.keys(u),f=c.length-1;f>=0;f--){var s=u[c[f]];if(r.dispatchComponent(s,i))return!0}r.depth--}return!1}function o(t,e){var n=t.children,r=e.loading;if(n){var i=r.getContext();if(r.depth++,Array.isArray(n))if(n.length){i.progress=0,i.loaded=!0;for(var o=0;o<n.length;o++){var a=n[o];r.updateComponent(a);var l=r.getContext();i.progress+=l.progress,l.loaded||(i.loaded=!1)}i.progress/=n.length}else i.progress=1;else if(n.type){var u=n;r.updateComponent(u);var c=r.getContext();i.progress=c.progress,i.loaded=c.loaded}else{var f=n,s=Object.keys(f);if(s.length){i.progress=0,i.loaded=!0;for(var p=0;p<s.length;p++){var h=f[s[p]];r.updateComponent(h);var d=r.getContext();i.progress+=d.progress,d.loaded||(i.loaded=!1)}i.progress/=s.length}else i.progress=1,i.loaded=!0}r.depth--}}t.render=e,t.update=r,t.hitTest=i,t.loaded=o,t.init=function(t){t.components.update.set(n,r),t.components.render.set(n,e),t.components.hitTest.set(n,i),t.components.loaded.set(n,o)}}(e||(e={}));var r,i,o,a,l,u,c,f,s,p="loader";!function(t){t.getLoadingProgress=function(t){var e;return null!==(e=t.loadingProgress)&&void 0!==e?e:0},t.isLoaded=function(t){var e;return null!==(e=t.loaded)&&void 0!==e&&e},t.needLoadingCheck=function(t){var e;return null===(e=t.loadingCheck)||void 0===e||e}}(r||(r={})),function(t){function n(t,n){if(r.needLoadingCheck(t)){e.loaded(t,n);var i=n.loading.getContext();t.loadingProgress=i.progress,i.loaded&&!t.loaded&&(t.loaded=!0,t.onLoaded&&t.onLoaded())}}t.loaded=n,t.init=function(t){t.components.update.set(p,e.update),t.components.render.set(p,e.render),t.components.hitTest.set(p,e.hitTest),t.components.loaded.set(p,n)}}(i||(i={})),function(t){t.empty=function(){return{alphaMultiplier:1,redMultiplier:1,greenMultiplier:1,blueMultiplier:1,alphaOffset:0,redOffset:0,greenOffset:0,blueOffset:0}},t.isEmpty=function(t){return 1===t.redMultiplier&&1===t.greenMultiplier&&1===t.blueMultiplier&&1===t.alphaMultiplier&&0===t.redOffset&&0===t.greenOffset&&0===t.blueOffset&&0===t.alphaOffset},t.isEmptyWithAlpha=function(t){return 1===t.redMultiplier&&1===t.greenMultiplier&&1===t.blueMultiplier&&0===t.redOffset&&0===t.greenOffset&&0===t.blueOffset&&0===t.alphaOffset},t.setEmpty=function(t){t.redMultiplier=1,t.greenMultiplier=1,t.blueMultiplier=1,t.alphaMultiplier=1,t.redOffset=0,t.greenOffset=0,t.blueOffset=0,t.alphaOffset=0},t.copy=function(t,e){e.alphaMultiplier=t.alphaMultiplier,e.redMultiplier=t.redMultiplier,e.greenMultiplier=t.greenMultiplier,e.blueMultiplier=t.blueMultiplier,e.alphaOffset=t.alphaOffset,e.redOffset=t.redOffset,e.greenOffset=t.greenOffset,e.blueOffset=t.blueOffset},t.concat=function(t,e,n){var r=t.alphaMultiplier*e.alphaMultiplier,i=t.redMultiplier*e.redMultiplier,o=t.greenMultiplier*e.greenMultiplier,a=t.blueMultiplier*e.blueMultiplier,l=t.alphaMultiplier*e.alphaOffset+t.alphaOffset,u=t.redMultiplier*e.redOffset+t.redOffset,c=t.greenMultiplier*e.greenOffset+t.greenOffset,f=t.blueMultiplier*e.blueOffset+t.blueOffset;n.alphaMultiplier=r,n.redMultiplier=i,n.greenMultiplier=o,n.blueMultiplier=a,n.alphaOffset=l,n.redOffset=u,n.greenOffset=c,n.blueOffset=f}}(o||(o={})),function(t){t.empty=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:Number.MIN_VALUE,maxY:Number.MIN_VALUE}},t.setEmpty=function(t){t.minX=Number.MAX_VALUE,t.minY=Number.MAX_VALUE,t.maxX=Number.MIN_VALUE,t.maxY=Number.MIN_VALUE},t.isEmpty=function(t){return t.minX===Number.MAX_VALUE&&t.minY===Number.MAX_VALUE&&t.maxX===Number.MIN_VALUE&&t.maxY===Number.MIN_VALUE},t.toRectangle=function(t,e){var n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;e.x=n,e.y=r,e.width=i-n,e.height=o-r},t.testX=function(t,e){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e)},t.testY=function(t,e){t.minY>e?t.minY=e:t.maxY<e&&(t.maxY=e)},t.test=function(t,e,n){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e),t.minY>n?t.minY=n:t.maxY<n&&(t.maxY=n)},t.testPoint=function(t,e){var n=e.x,r=e.y;t.minX>n?t.minX=n:t.maxX<n&&(t.maxX=n),t.minY>r?t.minY=r:t.maxY<r&&(t.maxY=r)}}(a||(a={})),function(t){function e(t){return t.a*t.d-t.b*t.c}t.empty=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},t.isEmpty=function(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.tx&&0===t.ty},t.setEmpty=function(t){t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0},t.copy=function(t,e){e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},t.concat=function(t,e,n){var r=e.a*t.a+e.b*t.c,i=e.a*t.b+e.b*t.d,o=e.c*t.a+e.d*t.c,a=e.c*t.b+e.d*t.d,l=e.tx*t.a+e.ty*t.c+t.tx,u=e.tx*t.b+e.ty*t.d+t.ty;n.a=r,n.b=i,n.c=o,n.d=a,n.tx=l,n.ty=u},t.getDeterminant=e,t.invert=function(t,n){var r=e(t);0===r?(n.a=0,n.b=0,n.c=0,n.d=0,n.tx=-t.tx,n.ty=-t.ty):(r=1/r,n.a=t.a*r,n.b=-t.b*r,n.c=-t.c*r,n.d=t.d*r,n.tx=-n.a*t.tx-n.c*t.ty,n.ty=-n.b*t.tx-n.d*t.ty)},t.transformPoint=function(t,e,n){var r=e.x,i=e.y;n.x=r*t.a+i*t.c+t.tx,n.y=r*t.b+i*t.d+t.ty},t.transformPointLocal=function(t,e,n){var r=e.x,i=e.y;n.x=r*t.a+i*t.c,n.y=r*t.b+i*t.d},t.transformInversePoint=function(t,n,r){var i=e(t);if(0===i)r.x=-t.tx,r.y=-t.ty;else{i=1/i;var o=n.x,a=n.y;r.x=i*(t.c*(t.ty-a)+t.d*(o-t.tx)),r.y=i*(t.a*(a-t.ty)+t.b*(t.tx-o))}},t.transformBounds=function(t,e,n){var r=t.a,i=t.b,o=t.c,a=t.d,l=t.tx,u=t.ty,c=e.x,f=e.y,s=c+e.width,p=f+e.height,h=c*r+f*o+l,d=c*i+f*a+u,y=s*r+f*o+l,v=s*i+f*a+u,g=s*r+p*o+l,m=s*i+p*a+u,b=c*r+p*o+l,x=c*i+p*a+u,w=h;w>y&&(w=y),w>g&&(w=g),w>b&&(w=b);var O=d;O>v&&(O=v),O>m&&(O=m),O>x&&(O=x);var M=h;M<y&&(M=y),M<g&&(M=g),M<b&&(M=b);var S=d;S<v&&(S=v),S<m&&(S=m),S<x&&(S=x),n.x=w,n.y=O,n.width=M-w,n.height=S-O}}(l||(l={})),function(t){function e(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}t.empty=function(){return{x:0,y:0}},t.length=e,t.angle=function(t){return Math.atan2(t.y,t.x)},t.isEmpty=function(t){return 0===t.x&&0===t.y},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.setEmpty=function(t){t.x=0,t.y=0},t.copy=function(t,e){e.x=t.x,e.y=t.y},t.normalize=function(t,n){var r=e(t);r>0&&(r=n/r,t.x*=r,t.y*=r)},t.distance=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},t.interpolate=function(t,e,n,r){r.x=t.x+n*(e.x-t.x),r.y=t.y+n*(e.y-t.y)},t.polar=function(t,e,n){t.x=e*Math.cos(n),t.y=e*Math.sin(n)}}(u||(u={})),function(t){t.empty=function(){return{x:0,y:0,width:0,height:0}},t.setEmpty=function(t){t.x=0,t.y=0,t.width=0,t.height=0},t.intersection=function(t,e,n){var r=t.x,i=t.y,o=t.width,a=t.height,l=e.x,u=e.y,c=e.x+e.width,f=e.y+e.height;r<l&&(o-=l-r,r=l),r+o>c&&(o=c-r),i<u&&(a-=u-i,i=u),i+a>f&&(a=f-i),o<0&&(o=0),a<0&&(a=0),n.x=r,n.y=i,n.width=o,n.height=a},t.isEmpty=function(t){return 0===t.width||0===t.height},t.contains=function(t,e){return t.x<e.x&&t.x+t.width>e.x&&t.y<e.y&&t.y+t.height>e.y},t.round=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.round(t.width),t.height=Math.round(t.height)}}(c||(c={})),function(t){t.isVisible=function(t){var e;return null===(e=t.visible)||void 0===e||e}}(f||(f={})),function(t){t.getMatrix=function(t,e){var n,r,i,o,a,l,u,c,f,s,p,h,d=t.matrix;if(d)return e.a=null!==(u=d.a)&&void 0!==u?u:1,e.b=null!==(c=d.b)&&void 0!==c?c:0,e.c=null!==(f=d.c)&&void 0!==f?f:0,e.d=null!==(s=d.d)&&void 0!==s?s:1,e.tx=null!==(p=d.tx)&&void 0!==p?p:0,void(e.ty=null!==(h=d.ty)&&void 0!==h?h:0);var y=t.rotation,v=null!==(n=null!==(r=t.scaleX)&&void 0!==r?r:t.scale)&&void 0!==n?n:1,g=null!==(i=null!==(o=t.scaleY)&&void 0!==o?o:t.scale)&&void 0!==i?i:1;if(e.tx=null!==(a=t.x)&&void 0!==a?a:0,e.ty=null!==(l=t.y)&&void 0!==l?l:0,y){var m=Math.cos(y),b=Math.sin(y);return e.a=m*v,e.b=b*v,e.c=-b*g,void(e.d=m*g)}e.a=v,e.b=0,e.c=0,e.d=g},t.getColorTransform=function(t,e){var n,r,i,o,a,l,u,c,f,s=t.colorTransform;if(s)return e.alphaMultiplier=null!==(r=s.alphaMultiplier)&&void 0!==r?r:1,e.redMultiplier=null!==(i=s.redMultiplier)&&void 0!==i?i:1,e.greenMultiplier=null!==(o=s.greenMultiplier)&&void 0!==o?o:1,e.blueMultiplier=null!==(a=s.blueMultiplier)&&void 0!==a?a:1,e.alphaOffset=null!==(l=s.alphaOffset)&&void 0!==l?l:0,e.redOffset=null!==(u=s.redOffset)&&void 0!==u?u:0,e.greenOffset=null!==(c=s.greenOffset)&&void 0!==c?c:0,void(e.blueOffset=null!==(f=s.blueOffset)&&void 0!==f?f:0);var p=null!==(n=t.alpha)&&void 0!==n?n:1,h=t.tint;if(h){var d=h.color,y=void 0===d?0:d,v=h.value,g=void 0===v?1:v,m=1-g,b=y>>16&255,x=y>>8&255,w=255&y;return e.alphaMultiplier=p,e.redMultiplier=m,e.greenMultiplier=m,e.blueMultiplier=m,e.alphaOffset=0,e.redOffset=b*g,e.greenOffset=x*g,void(e.blueOffset=w*g)}var O=t.brightness;if(void 0!==O){O>1?O=1:O<-1&&(O=-1);var M=1-Math.abs(O),S=0;return O>0&&(S=255*O),e.alphaMultiplier=p,e.redMultiplier=M,e.greenMultiplier=M,e.blueMultiplier=M,e.alphaOffset=0,e.redOffset=S,e.greenOffset=S,void(e.blueOffset=S)}e.alphaMultiplier=p,e.redMultiplier=1,e.greenMultiplier=1,e.blueMultiplier=1,e.alphaOffset=0,e.redOffset=0,e.greenOffset=0,e.blueOffset=0}}(s||(s={}));var h=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x,w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(u,t);var e,n,r,i,a=(r=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(r);if(i){var n=b(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return m(this,t)});function u(){var t;return y(this,u),(t=a.apply(this,arguments)).depth=0,t.elapsedTime=0,t.enabled=!0,t.contexts=[],t}return e=u,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={matrix:l.empty(),colorTransform:o.empty()},this.contexts[this.depth]=t),t}},{key:"renderComponent",value:function(t,e){if(!(this.depth>this.engine.depth)&&f.isVisible(t)){var n=this.getContext();s.getMatrix(t,n.matrix),s.getColorTransform(t,n.colorTransform),l.concat(e.matrix,n.matrix,n.matrix),o.concat(e.colorTransform,n.colorTransform,n.colorTransform);var r=this.engine.components.render.get(t.type);r&&r(t,this.engine)}}},{key:"render",value:function(){if(this.enabled){var t=this.engine.root;if(t){var e=performance.now();this.engine.platform.begin(),this.depth=0;var n=this.getContext();this.depth++,l.copy(this.engine.screen.getMatrix(),n.matrix),o.setEmpty(n.colorTransform),this.renderComponent(t,n),this.engine.platform.end(),this.elapsedTime=performance.now()-e}}}}])&&v(e.prototype,n),u}(h);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isEnabled=function(t){var e;return null===(e=t.enabled)||void 0===e||e},t.update=function(t,e){t.onUpdate&&t.onUpdate(e)}}(x||(x={}));var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(r);if(i){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return C(this,t)});function a(){var t;return M(this,a),(t=o.apply(this,arguments)).depth=0,t.time=0,t.elapsedTime=0,t.enabled=!0,t}return e=a,(n=[{key:"update",value:function(t){if(this.enabled){var e=this.engine.root;if(e){this.depth=0,this.time=t;var n=performance.now();this.updateComponent(e),this.elapsedTime=performance.now()-n}}}},{key:"updateComponent",value:function(t){if(!(this.depth>this.engine.depth)&&x.isEnabled(t)){this.updateProperties(t),x.update(t,this.time);var e=this.engine.components.update.get(t.type);e&&e(t,this.engine)}}},{key:"updateProperties",value:function(t){var e=this;this.engine.components.properties.forEach((function(n,r){t[r]&&n(t,e.engine)}))}}])&&S(e.prototype,n),a}(h);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(i){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function a(){var t;return T(this,a),(t=o.apply(this,arguments)).depth=0,t.elapsedTime=0,t.enabled=!0,t.contexts=[],t}return e=a,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={progress:0,loaded:!1},this.contexts[this.depth]=t),t}},{key:"updateComponent",value:function(t){var e=this.getContext();if(e.progress=1,e.loaded=!0,!(this.depth>this.engine.depth)){var n=this.engine.components.loaded.get(t.type);n&&n(t,this.engine)}}},{key:"update",value:function(){if(this.enabled){var t=this.engine.root;if(t){var e=performance.now();this.depth=0,this.updateComponent(t),this.elapsedTime=performance.now()-e}}}}])&&j(e.prototype,n),a}(h);function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var z,V=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=400,this.height=400,this.pixelRatio=0,this.fullscreen=!1,this.matrix=l.empty()}var e,n;return e=t,(n=[{key:"getMatrix",value:function(){var t=this.getPixelRatio();return this.matrix.a=t,this.matrix.d=t,this.matrix}},{key:"getWidth",value:function(){return this.fullscreen?window.innerWidth:this.width}},{key:"getHeight",value:function(){return this.fullscreen?window.innerHeight:this.height}},{key:"getPixelRatio",value:function(){var t;return this.pixelRatio>0?this.pixelRatio:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1}}])&&Y(e.prototype,n),t}(),U={pointerDown:"onPointerDown",pointerUp:"onPointerUp",pointerMove:"onPointerMove",pointerOver:"onPointerOver",pointerOut:"onPointerOut"};function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isPointerOver=function(t){return!!t.pointerOver},t.isPointerEnabled=function(t){var e;return null===(e=t.pointerEnabled)||void 0===e||e},t.dispatchEvent=function(t,e,n,r,i){var o=U[e];if(o&&t[o]){var a={type:e,x:n,y:r,id:i};t[o](a)}}}(z||(z={}));var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(i){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return W(this,t)});function a(){var t;return N(this,a),(t=o.apply(this,arguments)).depth=0,t.enabled=!0,t.global=u.empty(),t.local=u.empty(),t.pointerId=0,t.pointerType="pointerDown",t.contexts=[],t}return e=a,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={matrix:l.empty()},this.contexts[this.depth]=t),t}},{key:"dispatch",value:function(t,e,n,r){if(this.enabled){var i=this.engine.root;if(i){this.local.x=e,this.local.y=n,this.global.x=e,this.global.y=n,this.pointerId=r,this.pointerType=t,this.depth=0;var o=this.getContext();l.setEmpty(o.matrix),this.depth++,this.dispatchComponent(i,o)}}}},{key:"dispatchComponent",value:function(t,e){if(this.depth>this.engine.depth)return!1;if(!f.isVisible(t))return!1;if(!z.isPointerEnabled(t))return!1;var n=this.engine.components.hitTest.get(t.type);if(n){var r=this.getContext();s.getMatrix(t,r.matrix),l.concat(e.matrix,r.matrix,r.matrix),l.transformInversePoint(r.matrix,this.global,this.local);var i=this.local,o=i.x,a=i.y,u=n(t,this.engine);return u&&z.dispatchEvent(t,this.pointerType,o,a,this.pointerId),"pointerMove"===this.pointerType&&(u&&!t.pointerOver?z.dispatchEvent(t,"pointerOver",o,a,this.pointerId):!u&&t.pointerOver&&z.dispatchEvent(t,"pointerOut",o,a,this.pointerId),t.pointerOver=u),u}return!1}}])&&I(e.prototype,n),a}(h);function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var H=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frameRate=0,this.paused=!0,this.time=0,this.update=function(t){n.paused||(n.engine.updater.update(t),n.engine.loading.update(),n.engine.renderer.render())},this.updateFrame=function(){var t=performance.now(),e=(t-n.time)/1e3;n.time=t,n.update(e),n.updateNextFrame()},this.engine=e}var e,n;return e=t,(n=[{key:"isPaused",get:function(){return this.paused}},{key:"play",value:function(){this.paused&&(this.time=performance.now(),this.paused=!1,this.updateNextFrame())}},{key:"pause",value:function(){this.paused=!1}},{key:"updateNextFrame",value:function(){requestAnimationFrame(this.updateFrame)}}])&&G(e.prototype,n),t}();function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(r);if(i){var n=tt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Q(this,t)});function a(){var t;return K(this,a),(t=o.apply(this,arguments)).view=document.createElement("div"),t}return e=a,(n=[{key:"begin",value:function(){}},{key:"end",value:function(){}}])&&Z(e.prototype,n),a}(h);function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rt,it=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors=new Map,this.warnings=new Map,this.enabled=!0}var e,n;return e=t,(n=[{key:"log",value:function(){var t;this.enabled&&(t=console).log.apply(t,arguments)}},{key:"error",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=String(e),o=this.errors.get(i);o||(o=0,(r=console).error.apply(r,e)),o++,this.errors.set(i,o)}}},{key:"warning",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=String(e),o=this.warnings.get(i);o||(o=0,(r=console).warn.apply(r,e)),o++,this.warnings.set(i,o)}}}])&&nt(e.prototype,n),t}();function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.getProgress=function(t){return t?t.loaded?1:t.bytesTotal>0?t.bytesLoaded/t.bytesTotal:0:0}}(rt||(rt={}));var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=st(r);if(i){var n=st(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ft(this,t)});function a(){var t;return lt(this,a),(t=o.apply(this,arguments)).resources=new Map,t.resolvers=new Set,t}return e=a,(n=[{key:"get",value:function(t){if(!t)return null;var e=this.resources.get(t);return e||(e=this.resolve(t),this.resources.set(t,e)),e}},{key:"resolve",value:function(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(this.resolvers);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)(t,this.engine);if(r)return r}}catch(t){n.e(t)}finally{n.f()}return this.engine.debug.warning("Resource not resolved: ".concat(t)),null}}])&&ut(e.prototype,n),a}(h),ht=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.properties=new Map,this.render=new Map,this.update=new Map,this.hitTest=new Map,this.loaded=new Map};function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var yt,vt,gt=function t(){var n,r,o,a,l,u,c,f,s,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t),this.depth=32,h.Components=null!==(n=h.Components)&&void 0!==n?n:ht,h.Screen=null!==(r=h.Screen)&&void 0!==r?r:V,h.Platform=null!==(o=h.Platform)&&void 0!==o?o:et,h.Updater=null!==(a=h.Updater)&&void 0!==a?a:A,h.Loading=null!==(l=h.Loading)&&void 0!==l?l:X,h.Renderer=null!==(u=h.Renderer)&&void 0!==u?u:w,h.Pointers=null!==(c=h.Pointers)&&void 0!==c?c:q,h.Ticker=null!==(f=h.Ticker)&&void 0!==f?f:H,h.Debug=null!==(s=h.Debug)&&void 0!==s?s:it,h.Resources=null!==(p=h.Resources)&&void 0!==p?p:pt,this.components=new h.Components,this.screen=new h.Screen,this.platform=new h.Platform(this),this.updater=new h.Updater(this),this.loading=new h.Loading(this),this.renderer=new h.Renderer(this),this.pointers=new h.Pointers(this),this.ticker=new h.Ticker(this),this.debug=new h.Debug,this.resources=new h.Resources(this),e.init(this),i.init(this)};function mt(t,e,n){var r=t.platform.view,i=r.getBoundingClientRect(),o=e.clientX-i.left-r.clientLeft,a=e.clientY-i.top-r.clientTop;t.pointers.dispatch(n,o,a,0),e.preventDefault()}!function(t){t.init=function(t){var e=t.platform.view;e.addEventListener("mousedown",(function(e){mt(t,e,"pointerDown")})),e.addEventListener("mouseup",(function(e){mt(t,e,"pointerUp")})),e.addEventListener("mousemove",(function(e){mt(t,e,"pointerMove")}))}}(yt||(yt={})),function(t){t.getX=function(t,e){var n=t.pivotX;return n?-n*e:0},t.getY=function(t,e){var n=t.pivotY;return n?-n*e:0},t.hasValues=function(t){var e=t.pivotX,n=t.pivotY;return!!e||!!n}}(vt||(vt={}));var bt,xt,wt=document.createElement("canvas").getContext("2d"),Ot=1024,Mt=new Map;function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}!function(t){function e(t,e){return t.name.replace("%",e.toString())}function n(t,n,r){return wt.font=e(t,n),wt.measureText(r).width}function r(t,e){var r=t.widths.get(e);return r||(r=n(t,Ot,e),t.widths.set(e,r)),r}function i(t,e,i){var o=e+i,a=t.kernings.get(o);if(!a){var l=r(t,i);a=n(t,Ot,e+i)-l,t.kernings.set(o,a)}return a}t.getStyle=e,t.measureText=n,t.getCharWidth=r,t.getKerning=i,t.getAdvance=function(t,e,n,o){var a=e/Ot,l=r(t,n);return o?i(t,n,o)*a:l*a},t.getFont=function(t){var e="";t.bold&&(e+="bold "),t.italic&&(e+="italic "),e+="%px ".concat(t.font);var n=Mt.get(e);return n||(n={name:e,widths:new Map,kernings:new Map},Mt.set(e,n)),n}}(bt||(bt={})),function(t){t.defaultTextFormat={font:"arial",size:15,color:0,alpha:1,bold:!1,italic:!1,underline:!1,letterSpacing:0,leading:0,align:"left",verticalAlign:"top"},t.combine=function(t,e,n){var r,i,o,a,l,u,c,f,s,p,h;n.font=null!==(r=null==t?void 0:t.font)&&void 0!==r?r:e.font,n.size=null!==(i=null==t?void 0:t.size)&&void 0!==i?i:e.size,n.color=null!==(o=null==t?void 0:t.color)&&void 0!==o?o:e.color,n.alpha=null!==(a=null==t?void 0:t.alpha)&&void 0!==a?a:e.alpha,n.bold=null!==(l=null==t?void 0:t.bold)&&void 0!==l?l:e.bold,n.italic=null!==(u=null==t?void 0:t.italic)&&void 0!==u?u:e.italic,n.underline=null!==(c=null==t?void 0:t.underline)&&void 0!==c?c:e.underline,n.letterSpacing=null!==(f=null==t?void 0:t.letterSpacing)&&void 0!==f?f:e.letterSpacing,n.leading=null!==(s=null==t?void 0:t.leading)&&void 0!==s?s:e.leading,n.align=null!==(p=null==t?void 0:t.align)&&void 0!==p?p:e.align,n.verticalAlign=null!==(h=null==t?void 0:t.verticalAlign)&&void 0!==h?h:e.verticalAlign},t.copy=function(t,e){e.font=t.font,e.size=t.size,e.color=t.color,e.alpha=t.alpha,e.bold=t.bold,e.italic=t.italic,e.underline=t.underline,e.letterSpacing=t.letterSpacing,e.leading=t.leading,e.align=t.align,e.verticalAlign=t.verticalAlign},t.getAlignValue=function(t){switch(null==t?void 0:t.align){case"left":return 0;case"center":return.5;case"right":return 1;default:return 0}},t.getVerticalAlignValue=function(t){switch(null==t?void 0:t.verticalAlign){case"top":return 0;case"middle":return.5;case"bottom":return 1;default:return 0}}}(xt||(xt={}));var Pt,Ct,Et={};!function(t){t.create=function(){return{symbols:[],width:0,height:0}},t.empty=function(t){t.symbols.length=0,t.width=0,t.height=0},t.add=function(t,e){t.symbols.push(e),t.width+=e.advance,t.height=Math.max(t.height,e.format.size+e.format.leading)},t.concat=function(t,e){var n,r;e.symbols.length&&((n=t.symbols).push.apply(n,function(t){if(Array.isArray(t))return St(t)}(r=e.symbols)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return St(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t.width+=e.width,t.height=Math.max(t.height,e.height))},t.correctWidth=function(t){var e=t.symbols;if(e.length){var n=e[e.length-1];/\s/.test(n.symbol)&&(e.pop(),t.width-=n.advance)}},t.correctHeight=function(t){var e=t.symbols;if(e.length){var n=e[0];t.height-=n.format.leading}}}(Pt||(Pt={})),function(t){function e(t){var e=t.text;if(e&&e.length){xt.combine(t.format,xt.defaultTextFormat,Et);var n=[];if("string"==typeof e){var r={};xt.copy(Et,r);for(var i=bt.getFont(r),o=0;o<e.length;o++){var a=e[o],l=e[o+1],u=bt.getAdvance(i,r.size,a,l)+r.letterSpacing;n.push({symbol:a,advance:u,format:r})}}else if(Array.isArray(e))for(var c=0;c<e.length;c++){var f=e[c];if("string"==typeof f){var s={};xt.copy(Et,s);for(var p=bt.getFont(s),h=0;h<f.length;h++){var d=f[h],y=f[h+1],v=bt.getAdvance(p,s.size,d,y)+s.letterSpacing;n.push({symbol:d,advance:v,format:s})}}else{var g={};xt.combine(f,Et,g);for(var m=bt.getFont(g),b=0;b<f.text.length;b++){var x=f.text[b],w=f.text[b+1],O=bt.getAdvance(m,g.size,x,w)+g.letterSpacing;n.push({symbol:x,advance:O,format:g})}}}return n}}function n(t){var n=e(t);if(n&&n.length){var r=t.width,i=t.wordWrap,o=void 0!==i&&i,a=At.isMultiline(t),l=[],u=Pt.create();if(a)if(r)if(o){for(var c=Pt.create(),f=0;f<n.length;f++){var s=n[f];"\n"===s.symbol?(Pt.concat(u,c),l.push(u),u=Pt.create(),Pt.empty(c)):(Pt.add(c,s),u.width+c.width>r?(l.push(u),u=Pt.create()):/\s/.test(s.symbol)&&(Pt.concat(u,c),Pt.empty(c)))}Pt.concat(u,c)}else for(var p=0;p<n.length;p++){var h=n[p];"\n"===h.symbol?(l.push(u),u=Pt.create()):u.width+h.advance>r?(l.push(u),u=Pt.create(),Pt.add(u,h)):Pt.add(u,h)}else for(var d=0;d<n.length;d++){var y=n[d];"\n"===y.symbol?(l.push(u),u=Pt.create()):Pt.add(u,y)}else for(var v=0;v<n.length;v++){var g=n[v];Pt.add(u,g)}if(u.symbols.length&&l.push(u),l.length){for(var m=0;m<l.length;m++)u=l[m],Pt.correctWidth(u),u.height||(u.height=Et.size);u=l[l.length-1],Pt.correctHeight(u)}return l}}t.getSymbols=e,t.getLines=n,t.getMetrics=function(t){var e=n(t);if(e&&e.length){for(var r={lines:e,width:0,height:0},i=0;i<e.length;i++){var o=e[i];r.width=Math.max(r.width,o.width),r.height+=o.height}return r}},t.getSimpleMetrics=function(t){var e=t.text;if("string"==typeof e){xt.combine(t.format,xt.defaultTextFormat,Et);for(var n=Et.size,r=Et.letterSpacing,i=Et.leading,o=bt.getFont(Et),a=0,l=n,u=0,c=0;c<e.length;c++){var f=e[c];if("\n"===f)l+=n+i,a=Math.max(a,u),u=0;else{var s=e[c+1];u+=bt.getAdvance(o,n,f,s)+r}}return{width:a=Math.max(a,u),height:l}}},t.getSimpleWidth=function(t,e,n){if(n>=e.length)return 0;for(var r=Et.size,i=Et.letterSpacing,o=bt.getFont(Et),a=0,l=n;l<e.length;l++){var u=e[l];if("\n"===u)return a;var c=e[l+1];a+=bt.getAdvance(o,r,u,c)+i}return a}}(Ct||(Ct={}));var At,_t="text";!function(t){function e(t){return!t.width&&!t.height}t.getText=function(t){var e=t.text;if(!e)return"";if("string"==typeof e)return e;if(Array.isArray(e)){for(var n="",r=0;r<e.length;r++){var i=e[r];n+="string"==typeof i?i:i.text}return n}return""},t.isAutoSize=e,t.isSimple=function(t){return"string"==typeof t.text&&e(t)},t.isMultiline=function(t){var e;return null===(e=t.multiline)||void 0===e||e},t.calculateBounds=function(e,n){var r;if(r=t.isSimple(e)?Ct.getSimpleMetrics(e):Ct.getMetrics(e)){var i=e.width,o=e.height;i||(i=r.width),o||(o=r.height);var a=vt.getX(e,i),l=vt.getY(e,o);n.x=a,n.y=l,n.width=i,n.height=o}else c.setEmpty(n)}}(At||(At={}));var Tt,jt=c.empty();!function(t){function e(t,e){var n=e.pointers.local;return At.calculateBounds(t,jt),c.contains(jt,n)}t.hitTest=e,t.init=function(t){t.components.hitTest.set(_t,e)}}(Tt||(Tt={}));var Rt,kt=u.empty(),Lt=u.empty();function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){function e(t,e,n){var r=t>>16&255,i=t>>8&255,a=255&t,l=255*e;return o.isEmpty(n)||(r=r*n.redMultiplier+n.redOffset&255,i=i*n.greenMultiplier+n.greenOffset&255,a=a*n.blueMultiplier+n.blueOffset&255,l=l*n.alphaMultiplier+n.alphaOffset&255),l<255?"rgba(".concat(r,", ").concat(i,", ").concat(a,", ").concat(l/255,")"):"rgb(".concat(r,", ").concat(i,", ").concat(a,")")}function n(t,n,r,i,o){for(var a=0;a<n.length;a++){var l=n[a],u=r[a],c=i[a]/255;c<0&&(c=0),c>1&&(c=1),t.addColorStop(c,e(l,u,o))}}t.colorPattern=e,t.addGradientColors=n,t.radialGradientPattern=function(t,e,r,i,o,a){kt.x=1638.4,kt.y=0,l.transformPoint(t,kt,kt);var u=a.createRadialGradient(t.tx,t.ty,0,t.tx,t.ty,Math.abs((kt.x-t.tx)/2));return n(u,e,r,i,o),u},t.linearGradientPattern=function(t,e,r,i,o,a){kt.x=-819.2,kt.y=0,Lt.x=819.2,Lt.y=0,l.transformPoint(t,kt,kt),l.transformPoint(t,Lt,Lt);var u=a.createLinearGradient(kt.x,kt.y,Lt.x,Lt.y);return n(u,e,r,i,o),u},t.bitmapPattern=function(t,e,n){return n.createPattern(t,e?"repeat":"none")||""}}(Rt||(Rt={}));var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(a,t);var e,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bt(r);if(i){var n=Bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ut(this,t)});function a(){var t;return Yt(this,a),(t=o.apply(this,arguments)).view=document.createElement("canvas"),t.contexts=[t.view.getContext("2d")],t.customContexts=[],t}return e=a,(n=[{key:"getContext",value:function(){return this.contexts[this.contexts.length-1]}},{key:"saveContext",value:function(t){this.contexts.push(t)}},{key:"restoreContext",value:function(){this.contexts.length>1?this.contexts.pop():this.engine.debug.warning("Trying to restore main context")}},{key:"createCustomContext",value:function(){var t;t=this.customContexts.length?this.customContexts.pop():document.createElement("canvas").getContext("2d");var e=this.view,n=e.width,r=e.height;return t.canvas.width!==n&&(t.canvas.width=n),t.canvas.height!==r&&(t.canvas.height=r),t}},{key:"destroyCustomContext",value:function(t){this.customContexts.push(t)}},{key:"begin",value:function(){this.clear(),this.updateSize()}},{key:"clear",value:function(){var t=this.view,e=this.getContext();e.setTransform(),e.clearRect(0,0,t.width,t.height)}},{key:"updateSize",value:function(){var t=this.engine.screen.getWidth(),e=this.engine.screen.getHeight(),n=this.engine.screen.getPixelRatio(),r=Math.floor(t*n),i=Math.floor(e*n),o=this.view;o.width===r&&o.height===i||(o.width=r,o.height=i,o.style.width="".concat(t,"px"),o.style.height="".concat(e,"px"))}}])&&zt(e.prototype,n),a}(et);function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dt(t,e){return!e||"object"!==It(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt,Ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=qt(e);if(n){var i=qt(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return Dt(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(this,i),e.Platform=null!==(t=e.Platform)&&void 0!==t?t:Nt,r.call(this,e)}return i}(gt),$t={},Kt=.85;!function(t){function e(t,e){var n=e.renderer.getContext(),r=n.matrix,i=n.colorTransform;if(!(i.alphaMultiplier<=0)){var o,a=At.isSimple(t);if(o=a?Ct.getSimpleMetrics(t):Ct.getMetrics(t)){var l=t.width,u=t.height,c=t.format,f=t.border,s=t.background;xt.combine(c,xt.defaultTextFormat,$t);var p=null!=l?l:o.width,h=null!=u?u:o.height,d=vt.getX(t,p),y=vt.getY(t,h),v=0;if(u){var g=xt.getVerticalAlignValue($t);(v=(u-o.height)*g)<0&&(v=0)}v+=y;var m=e.platform.getContext();if(m.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),m.globalAlpha=1,void 0!==s&&(m.strokeStyle="",m.fillStyle=Rt.colorPattern(s,1,i),m.beginPath(),m.rect(d,y,p,h),m.closePath(),m.fill()),void 0!==f&&(m.strokeStyle=Rt.colorPattern(f,1,i),m.fillStyle="",m.beginPath(),m.rect(d,y,p,h),m.closePath(),m.stroke()),m.textBaseline="alphabetic",m.strokeStyle="",a){var b=t.text,x=$t.size,w=$t.color,O=$t.alpha,M=$t.leading,S=$t.letterSpacing,P=bt.getFont($t),C=x*Kt,E=xt.getAlignValue($t);m.font=bt.getStyle(P,x),m.fillStyle=Rt.colorPattern(w,O,i);for(var A=d+E?E*(p-Ct.getSimpleWidth($t,b,0)):0,_=0;_<b.length;_++){var T=b[_];if("\n"===T)A=E?E*(p-Ct.getSimpleWidth($t,b,_+1)):0,v+=x+M;else{var j=b[_+1],R=bt.getAdvance(P,x,T,j)+S;m.fillText(T,A,v+C),A+=R}}}else{e.debug.warning("rich text");for(var k=o.lines,L=0;L<k.length;L++){var X=k[L];if(X.symbols.length){var Y=X.symbols[0],z=xt.getAlignValue(Y.format),V=(p-X.width)*z;V<0&&(V=0),V+=d;for(var U=X.symbols,B=X.height*Kt,N=0;N<U.length;N++){var I=U[N],F=I.format.size,W=xt.getVerticalAlignValue(I.format),D=F*Kt,q=bt.getFont(I.format);m.font=bt.getStyle(q,F),m.fillStyle=Rt.colorPattern(I.format.color,I.format.alpha,i),m.fillText(I.symbol,V,v+D+W*(B-D)),V+=I.advance}}v+=X.height}}}}}t.render=e,t.init=function(t){Tt.init(t),t.components.render.set(_t,e)}}(Gt||(Gt={}));const Zt=new Ht;Gt.init(Zt),Zt.screen.fullscreen=!0,Zt.ticker.play(),document.body.appendChild(Zt.platform.view);const Jt="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus imperdiet ultricies nibh, at mattis sem volutpat et. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.",Qt={type:n,children:function(t){let e=20;return t.forEach((t=>{t.x=20,t.y=e,e+=10+(t.height??0)})),t}([{type:_t,text:[{text:"Big text. ",size:25,color:16711680,verticalAlign:"bottom"},{text:"Middle text. ",verticalAlign:"bottom"},{text:"Little text.",size:10,verticalAlign:"bottom",color:255},"\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit."],format:{size:15,color:2267443,leading:5},wordWrap:!0,border:2241433,width:300,height:100},{type:_t,text:[{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. LEFT\n\n",align:"left"},{text:"Phasellus imperdiet ultricies nibh, at mattis sem volutpat et. CENTER\n\n",align:"center"},{text:"Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. RIGHT",align:"right"}],format:{size:13,color:2241433,letterSpacing:1,verticalAlign:"middle"},wordWrap:!0,border:10040098,width:300,height:150},{type:_t,text:Jt,format:{size:11,color:10040098,align:"right",verticalAlign:"bottom"},wordWrap:!0,border:2267443,width:300,height:70},{type:_t,text:Jt,format:{size:13,color:0,verticalAlign:"middle"},border:2267443,background:16768443,width:300,height:100},{type:_t,text:"AUTO SIZE\nLorem ipsum dolor sit amet, consectetur adipiscing elit.\nPhasellus imperdiet ultricies nibh, at mattis sem volutpat et.",format:{size:15,color:255},border:255}])};Zt.root=Qt})();