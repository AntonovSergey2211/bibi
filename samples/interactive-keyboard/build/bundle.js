(()=>{"use strict";var t,e,n="container";!function(t){t.numChildren=function(t){var e=t.children;return e?Array.isArray(e)?e.length:e.type?1:Object.keys(e).length:0}}(t||(t={})),function(t){function e(t,e){var n=t.children,r=e.renderer;if(n){var o=r.getContext();if(r.depth++,Array.isArray(n))for(var i=0;i<n.length;i++){var u=n[i];r.renderComponent(u,o)}else if(n.type){var a=n;r.renderComponent(a,o)}else for(var c=n,f=Object.keys(c),l=0;l<f.length;l++){var s=c[f[l]];r.renderComponent(s,o)}r.depth--}}function r(t,e){var n=t.children,r=e.updater;if(n){if(r.depth++,Array.isArray(n))for(var o=0;o<n.length;o++){var i=n[o];r.updateComponent(i)}else if(n.type){var u=n;r.updateComponent(u)}else for(var a=n,c=Object.keys(a),f=0;f<c.length;f++){var l=a[c[f]];r.updateComponent(l)}r.depth--}}function o(t,e){var n=t.children,r=e.pointers;if(n){var o=r.getContext();r.depth++;var i=!1;if(Array.isArray(n))for(var u=n.length-1;u>=0;u--){var a=n[u];r.dispatchComponent(a,o,i)&&(i=!0)}else if(n.type){var c=n;r.dispatchComponent(c,o,i)&&(i=!0)}else for(var f=n,l=Object.keys(f),s=l.length-1;s>=0;s--){var p=f[l[s]];r.dispatchComponent(p,o,i)&&(i=!0)}return r.depth--,i}return!1}function i(t,e){var n=t.children,r=e.keyboard;if(n){if(r.depth++,Array.isArray(n))for(var o=0;o<n.length;o++){var i=n[o];r.dispatchComponent(i)}else if(n.type){var u=n;r.dispatchComponent(u)}else for(var a=n,c=Object.keys(a),f=0;f<c.length;f++){var l=a[c[f]];r.dispatchComponent(l)}r.depth--}}function u(t,e){var n=t.children,r=e.loading;if(n){var o=r.getContext();if(r.depth++,Array.isArray(n))if(n.length){o.progress=0,o.loaded=!0;for(var i=0;i<n.length;i++){var u=n[i];r.updateComponent(u);var a=r.getContext();o.progress+=a.progress,a.loaded||(o.loaded=!1)}o.progress/=n.length}else o.progress=1;else if(n.type){var c=n;r.updateComponent(c);var f=r.getContext();o.progress=f.progress,o.loaded=f.loaded}else{var l=n,s=Object.keys(l);if(s.length){o.progress=0,o.loaded=!0;for(var p=0;p<s.length;p++){var y=l[s[p]];r.updateComponent(y);var h=r.getContext();o.progress+=h.progress,h.loaded||(o.loaded=!1)}o.progress/=s.length}else o.progress=1,o.loaded=!0}r.depth--}}t.render=e,t.update=r,t.hitTest=o,t.keyTest=i,t.loaded=u,t.init=function(t){t.components.update.set(n,r),t.components.render.set(n,e),t.components.hitTest.set(n,o),t.components.keyTest.set(n,i),t.components.loaded.set(n,u)}}(e||(e={}));var r,o,i,u,a,c,f,l,s,p="loader";!function(t){t.getLoadingProgress=function(t){var e;return null!==(e=t.loadingProgress)&&void 0!==e?e:0},t.isLoaded=function(t){var e;return null!==(e=t.loaded)&&void 0!==e&&e},t.needLoadingCheck=function(t){var e;return null===(e=t.loadingCheck)||void 0===e||e}}(r||(r={})),function(t){function n(t,n){if(r.needLoadingCheck(t)){e.loaded(t,n);var o=n.loading.getContext();t.loadingProgress=o.progress,o.loaded&&!t.loaded&&(t.loaded=!0,t.onLoaded&&t.onLoaded())}}t.loaded=n,t.init=function(t){t.components.update.set(p,e.update),t.components.render.set(p,e.render),t.components.hitTest.set(p,e.hitTest),t.components.loaded.set(p,n)}}(o||(o={})),function(t){t.empty=function(){return{alphaMultiplier:1,redMultiplier:1,greenMultiplier:1,blueMultiplier:1,alphaOffset:0,redOffset:0,greenOffset:0,blueOffset:0}},t.isEmpty=function(t){return 1===t.redMultiplier&&1===t.greenMultiplier&&1===t.blueMultiplier&&1===t.alphaMultiplier&&0===t.redOffset&&0===t.greenOffset&&0===t.blueOffset&&0===t.alphaOffset},t.isEmptyWithAlpha=function(t){return 1===t.redMultiplier&&1===t.greenMultiplier&&1===t.blueMultiplier&&0===t.redOffset&&0===t.greenOffset&&0===t.blueOffset&&0===t.alphaOffset},t.setEmpty=function(t){t.redMultiplier=1,t.greenMultiplier=1,t.blueMultiplier=1,t.alphaMultiplier=1,t.redOffset=0,t.greenOffset=0,t.blueOffset=0,t.alphaOffset=0},t.copy=function(t,e){e.alphaMultiplier=t.alphaMultiplier,e.redMultiplier=t.redMultiplier,e.greenMultiplier=t.greenMultiplier,e.blueMultiplier=t.blueMultiplier,e.alphaOffset=t.alphaOffset,e.redOffset=t.redOffset,e.greenOffset=t.greenOffset,e.blueOffset=t.blueOffset},t.concat=function(t,e,n){var r=t.alphaMultiplier*e.alphaMultiplier,o=t.redMultiplier*e.redMultiplier,i=t.greenMultiplier*e.greenMultiplier,u=t.blueMultiplier*e.blueMultiplier,a=t.alphaMultiplier*e.alphaOffset+t.alphaOffset,c=t.redMultiplier*e.redOffset+t.redOffset,f=t.greenMultiplier*e.greenOffset+t.greenOffset,l=t.blueMultiplier*e.blueOffset+t.blueOffset;n.alphaMultiplier=r,n.redMultiplier=o,n.greenMultiplier=i,n.blueMultiplier=u,n.alphaOffset=a,n.redOffset=c,n.greenOffset=f,n.blueOffset=l}}(i||(i={})),function(t){t.empty=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:Number.MIN_VALUE,maxY:Number.MIN_VALUE}},t.setEmpty=function(t){t.minX=Number.MAX_VALUE,t.minY=Number.MAX_VALUE,t.maxX=Number.MIN_VALUE,t.maxY=Number.MIN_VALUE},t.isEmpty=function(t){return t.minX===Number.MAX_VALUE&&t.minY===Number.MAX_VALUE&&t.maxX===Number.MIN_VALUE&&t.maxY===Number.MIN_VALUE},t.toRectangle=function(t,e){var n=t.minX,r=t.minY,o=t.maxX,i=t.maxY;e.x=n,e.y=r,e.width=o-n,e.height=i-r},t.testX=function(t,e){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e)},t.testY=function(t,e){t.minY>e?t.minY=e:t.maxY<e&&(t.maxY=e)},t.test=function(t,e,n){t.minX>e?t.minX=e:t.maxX<e&&(t.maxX=e),t.minY>n?t.minY=n:t.maxY<n&&(t.maxY=n)},t.testPoint=function(t,e){var n=e.x,r=e.y;t.minX>n?t.minX=n:t.maxX<n&&(t.maxX=n),t.minY>r?t.minY=r:t.maxY<r&&(t.maxY=r)}}(u||(u={})),function(t){function e(t){return t.a*t.d-t.b*t.c}t.empty=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},t.isEmpty=function(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.tx&&0===t.ty},t.setEmpty=function(t){t.a=1,t.b=0,t.c=0,t.d=1,t.tx=0,t.ty=0},t.copy=function(t,e){e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e.tx=t.tx,e.ty=t.ty},t.concat=function(t,e,n){var r=e.a*t.a+e.b*t.c,o=e.a*t.b+e.b*t.d,i=e.c*t.a+e.d*t.c,u=e.c*t.b+e.d*t.d,a=e.tx*t.a+e.ty*t.c+t.tx,c=e.tx*t.b+e.ty*t.d+t.ty;n.a=r,n.b=o,n.c=i,n.d=u,n.tx=a,n.ty=c},t.getDeterminant=e,t.invert=function(t,n){var r=e(t);0===r?(n.a=0,n.b=0,n.c=0,n.d=0,n.tx=-t.tx,n.ty=-t.ty):(r=1/r,n.a=t.a*r,n.b=-t.b*r,n.c=-t.c*r,n.d=t.d*r,n.tx=-n.a*t.tx-n.c*t.ty,n.ty=-n.b*t.tx-n.d*t.ty)},t.transformPoint=function(t,e,n){var r=e.x,o=e.y;n.x=r*t.a+o*t.c+t.tx,n.y=r*t.b+o*t.d+t.ty},t.transformPointLocal=function(t,e,n){var r=e.x,o=e.y;n.x=r*t.a+o*t.c,n.y=r*t.b+o*t.d},t.transformInversePoint=function(t,n,r){var o=e(t);if(0===o)r.x=-t.tx,r.y=-t.ty;else{o=1/o;var i=n.x,u=n.y;r.x=o*(t.c*(t.ty-u)+t.d*(i-t.tx)),r.y=o*(t.a*(u-t.ty)+t.b*(t.tx-i))}},t.transformBounds=function(t,e,n){var r=t.a,o=t.b,i=t.c,u=t.d,a=t.tx,c=t.ty,f=e.x,l=e.y,s=f+e.width,p=l+e.height,y=f*r+l*i+a,h=f*o+l*u+c,d=s*r+l*i+a,v=s*o+l*u+c,b=s*r+p*i+a,m=s*o+p*u+c,g=f*r+p*i+a,w=f*o+p*u+c,x=y;x>d&&(x=d),x>b&&(x=b),x>g&&(x=g);var O=h;O>v&&(O=v),O>m&&(O=m),O>w&&(O=w);var _=y;_<d&&(_=d),_<b&&(_=b),_<g&&(_=g);var M=h;M<v&&(M=v),M<m&&(M=m),M<w&&(M=w),n.x=x,n.y=O,n.width=_-x,n.height=M-O}}(a||(a={})),function(t){function e(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}t.empty=function(){return{x:0,y:0}},t.length=e,t.angle=function(t){return Math.atan2(t.y,t.x)},t.isEmpty=function(t){return 0===t.x&&0===t.y},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.setEmpty=function(t){t.x=0,t.y=0},t.copy=function(t,e){e.x=t.x,e.y=t.y},t.normalize=function(t,n){var r=e(t);r>0&&(r=n/r,t.x*=r,t.y*=r)},t.distance=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},t.interpolate=function(t,e,n,r){r.x=t.x+n*(e.x-t.x),r.y=t.y+n*(e.y-t.y)},t.polar=function(t,e,n){t.x=e*Math.cos(n),t.y=e*Math.sin(n)}}(c||(c={})),function(t){t.empty=function(){return{x:0,y:0,width:0,height:0}},t.setEmpty=function(t){t.x=0,t.y=0,t.width=0,t.height=0},t.intersection=function(t,e,n){var r=t.x,o=t.y,i=t.width,u=t.height,a=e.x,c=e.y,f=e.x+e.width,l=e.y+e.height;r<a&&(i-=a-r,r=a),r+i>f&&(i=f-r),o<c&&(u-=c-o,o=c),o+u>l&&(u=l-o),i<0&&(i=0),u<0&&(u=0),n.x=r,n.y=o,n.width=i,n.height=u},t.isEmpty=function(t){return 0===t.width||0===t.height},t.contains=function(t,e){return t.x<e.x&&t.x+t.width>e.x&&t.y<e.y&&t.y+t.height>e.y},t.round=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.round(t.width),t.height=Math.round(t.height)}}(f||(f={})),function(t){t.isVisible=function(t){var e;return null===(e=t.visible)||void 0===e||e}}(l||(l={})),function(t){t.getMatrix=function(t,e){var n,r,o,i,u,a,c,f,l,s,p,y,h=t.matrix;if(h)return e.a=null!==(c=h.a)&&void 0!==c?c:1,e.b=null!==(f=h.b)&&void 0!==f?f:0,e.c=null!==(l=h.c)&&void 0!==l?l:0,e.d=null!==(s=h.d)&&void 0!==s?s:1,e.tx=null!==(p=h.tx)&&void 0!==p?p:0,void(e.ty=null!==(y=h.ty)&&void 0!==y?y:0);var d=t.rotation,v=null!==(n=null!==(r=t.scaleX)&&void 0!==r?r:t.scale)&&void 0!==n?n:1,b=null!==(o=null!==(i=t.scaleY)&&void 0!==i?i:t.scale)&&void 0!==o?o:1;if(e.tx=null!==(u=t.x)&&void 0!==u?u:0,e.ty=null!==(a=t.y)&&void 0!==a?a:0,d){var m=Math.cos(d),g=Math.sin(d);return e.a=m*v,e.b=g*v,e.c=-g*b,void(e.d=m*b)}e.a=v,e.b=0,e.c=0,e.d=b},t.getColorTransform=function(t,e){var n,r,o,i,u,a,c,f,l,s=t.colorTransform;if(s)return e.alphaMultiplier=null!==(r=s.alphaMultiplier)&&void 0!==r?r:1,e.redMultiplier=null!==(o=s.redMultiplier)&&void 0!==o?o:1,e.greenMultiplier=null!==(i=s.greenMultiplier)&&void 0!==i?i:1,e.blueMultiplier=null!==(u=s.blueMultiplier)&&void 0!==u?u:1,e.alphaOffset=null!==(a=s.alphaOffset)&&void 0!==a?a:0,e.redOffset=null!==(c=s.redOffset)&&void 0!==c?c:0,e.greenOffset=null!==(f=s.greenOffset)&&void 0!==f?f:0,void(e.blueOffset=null!==(l=s.blueOffset)&&void 0!==l?l:0);var p=null!==(n=t.alpha)&&void 0!==n?n:1,y=t.tint;if(y){var h=y.color,d=void 0===h?0:h,v=y.value,b=void 0===v?1:v,m=1-b,g=d>>16&255,w=d>>8&255,x=255&d;return e.alphaMultiplier=p,e.redMultiplier=m,e.greenMultiplier=m,e.blueMultiplier=m,e.alphaOffset=0,e.redOffset=g*b,e.greenOffset=w*b,void(e.blueOffset=x*b)}var O=t.brightness;if(void 0!==O){O>1?O=1:O<-1&&(O=-1);var _=1-Math.abs(O),M=0;return O>0&&(M=255*O),e.alphaMultiplier=p,e.redMultiplier=_,e.greenMultiplier=_,e.blueMultiplier=_,e.alphaOffset=0,e.redOffset=M,e.greenOffset=M,void(e.blueOffset=M)}e.alphaMultiplier=p,e.redMultiplier=1,e.greenMultiplier=1,e.blueMultiplier=1,e.alphaOffset=0,e.redOffset=0,e.greenOffset=0,e.blueOffset=0}}(s||(s={}));var y=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.engine=e};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w,x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(c,t);var e,n,r,o,u=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(r);if(o){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return m(this,t)});function c(){var t;return d(this,c),(t=u.apply(this,arguments)).depth=0,t.elapsedTime=0,t.enabled=!0,t.contexts=[],t}return e=c,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={matrix:a.empty(),colorTransform:i.empty()},this.contexts[this.depth]=t),t}},{key:"renderComponent",value:function(t,e){if(!(this.depth>this.engine.depth)&&l.isVisible(t)){var n=this.getContext();s.getMatrix(t,n.matrix),s.getColorTransform(t,n.colorTransform),a.concat(e.matrix,n.matrix,n.matrix),i.concat(e.colorTransform,n.colorTransform,n.colorTransform);var r=this.engine.components.render.get(t.type);r&&r(t,this.engine)}}},{key:"render",value:function(){if(this.enabled){var t=this.engine.root;if(t){var e=performance.now();this.engine.platform.begin(),this.depth=0;var n=this.getContext();this.depth++,a.copy(this.engine.screen.getMatrix(),n.matrix),i.setEmpty(n.colorTransform),this.renderComponent(t,n),this.engine.platform.end(),this.elapsedTime=performance.now()-e}}}}])&&v(e.prototype,n),c}(y);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isEnabled=function(t){var e;return null===(e=t.enabled)||void 0===e||e},t.update=function(t,e){t.onUpdate&&t.onUpdate(e)}}(w||(w={}));var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return E(this,t)});function u(){var t;return _(this,u),(t=i.apply(this,arguments)).depth=0,t.time=0,t.elapsedTime=0,t.enabled=!0,t}return e=u,(n=[{key:"update",value:function(t){if(this.enabled){var e=this.engine.root;if(e){this.depth=0,this.time=t;var n=performance.now();this.updateComponent(e),this.elapsedTime=performance.now()-n}}}},{key:"updateComponent",value:function(t){if(!(this.depth>this.engine.depth)&&w.isEnabled(t)){this.updateProperties(t),w.update(t,this.time);var e=this.engine.components.update.get(t.type);e&&e(t,this.engine)}}},{key:"updateProperties",value:function(t){var e=this;this.engine.components.properties.forEach((function(n,r){t[r]&&n(t,e.engine)}))}}])&&M(e.prototype,n),u}(y);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X,B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return A(this,t)});function u(){var t;return S(this,u),(t=i.apply(this,arguments)).depth=0,t.elapsedTime=0,t.enabled=!0,t.contexts=[],t}return e=u,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={progress:0,loaded:!1},this.contexts[this.depth]=t),t}},{key:"updateComponent",value:function(t){var e=this.getContext();if(e.progress=1,e.loaded=!0,!(this.depth>this.engine.depth)){var n=this.engine.components.loaded.get(t.type);n&&n(t,this.engine)}}},{key:"update",value:function(){if(this.enabled){var t=this.engine.root;if(t){var e=performance.now();this.depth=0,this.updateComponent(t),this.elapsedTime=performance.now()-e}}}}])&&k(e.prototype,n),u}(y),Y={pointerDown:"onPointerDown",pointerUp:"onPointerUp",pointerMove:"onPointerMove",pointerCancel:"onPointerCancel",pointerOver:"onPointerOver",pointerOut:"onPointerOut"};function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function V(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isPointerEnabled=function(t){var e;return null===(e=t.pointerEnabled)||void 0===e||e},t.dispatchEvent=function(t,e,n,r,o,i,u){var a=Y[e];if(a&&t[a]){var c={type:e,x:n,y:r,globalX:o,globalY:i,id:u};t[a](c)}}}(X||(X={}));var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(r);if(o){var n=W(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return V(this,t)});function u(){var t;return U(this,u),(t=i.apply(this,arguments)).depth=0,t.enabled=!0,t.global=c.empty(),t.local=c.empty(),t.pointerId=0,t.pointerType="pointerDown",t.contexts=[],t}return e=u,(n=[{key:"getContext",value:function(){var t=this.contexts[this.depth];return t||(t={matrix:a.empty()},this.contexts[this.depth]=t),t}},{key:"dispatch",value:function(t,e,n,r){if(this.enabled){var o=this.engine.root;if(o){this.local.x=e,this.local.y=n,this.global.x=e,this.global.y=n,this.pointerId=r,this.pointerType=t,this.depth=0;var i=this.getContext();a.setEmpty(i.matrix),this.depth++,this.dispatchComponent(o,i,!1)}}}},{key:"updateLocal",value:function(t,e){var n=this.getContext();s.getMatrix(t,n.matrix),a.concat(e.matrix,n.matrix,n.matrix),a.transformInversePoint(n.matrix,this.global,this.local)}},{key:"dispatchComponent",value:function(t,e,n){if(this.depth>this.engine.depth)return!1;if(!l.isVisible(t))return!1;if(!X.isPointerEnabled(t))return!1;if(n){if(t.pointerOver&&"pointerMove"===this.pointerType){this.updateLocal(t,e);var r=this.local,o=r.x,i=r.y;X.dispatchEvent(t,"pointerOut",o,i,this.global.x,this.global.y,this.pointerId),t.pointerOver=!1}return!1}var u=this.engine.components.hitTest.get(t.type);if(u){this.updateLocal(t,e);var a=this.local,c=a.x,f=a.y,s=u(t,this.engine);return s&&X.dispatchEvent(t,this.pointerType,c,f,this.global.x,this.global.y,this.pointerId),"pointerMove"===this.pointerType&&(s&&!t.pointerOver?X.dispatchEvent(t,"pointerOver",c,f,this.global.x,this.global.y,this.pointerId):!s&&t.pointerOver&&X.dispatchEvent(t,"pointerOut",c,f,this.global.x,this.global.y,this.pointerId),t.pointerOver=s),s}return!1}}])&&N(e.prototype,n),u}(y);function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frameRate=0,this.paused=!0,this.time=0,this.update=function(t){n.paused||(n.engine.updater.update(t),n.engine.loading.update(),n.engine.renderer.render())},this.updateFrame=function(){var t=performance.now(),e=(t-n.time)/1e3;n.time=t,n.update(e),n.updateNextFrame()},this.engine=e}var e,n;return e=t,(n=[{key:"isPaused",get:function(){return this.paused}},{key:"play",value:function(){this.paused&&(this.time=performance.now(),this.paused=!1,this.updateNextFrame())}},{key:"pause",value:function(){this.paused=!1}},{key:"updateNextFrame",value:function(){requestAnimationFrame(this.updateFrame)}}])&&H(e.prototype,n),t}();function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z,tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Q(r);if(o){var n=Q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return J(this,t)});function u(){var t;return q(this,u),(t=i.apply(this,arguments)).infos=new Map,t.errors=new Map,t.warnings=new Map,t.enabled=!0,t}return e=u,(n=[{key:"log",value:function(){var t;this.enabled&&(t=console).log.apply(t,arguments)}},{key:"info",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,o=String(e),i=this.infos.get(o);i||(i=0,(r=console).info.apply(r,e)),i++,this.infos.set(o,i)}}},{key:"error",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,o=String(e),i=this.errors.get(o);i||(i=0,(r=console).error.apply(r,e)),i++,this.errors.set(o,i)}}},{key:"warning",value:function(){if(this.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,o=String(e),i=this.warnings.get(o);i||(i=0,(r=console).warn.apply(r,e)),i++,this.warnings.set(o,i)}}}])&&z(e.prototype,n),u}(y);function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.getProgress=function(t){return t?t.loaded?1:t.bytesTotal>0?t.bytesLoaded/t.bytesTotal:0:0}}(Z||(Z={}));var ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(r);if(o){var n=at(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ut(this,t)});function u(){var t;return rt(this,u),(t=i.apply(this,arguments)).resources=new Map,t.resolvers=new Set,t}return e=u,(n=[{key:"get",value:function(t){if(!t)return null;var e=this.resources.get(t);return e||(e=this.resolve(t),this.resources.set(t,e)),e}},{key:"resolve",value:function(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}(this.resolvers);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)(t,this.engine);if(r)return r}}catch(t){n.e(t)}finally{n.f()}return this.engine.debug.warning("Resource not resolved: ".concat(t)),null}}])&&ot(e.prototype,n),u}(y);function ft(t){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pt(t,e){return!e||"object"!==ft(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ht,dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=yt(e);if(n){var o=yt(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return pt(this,t)});function o(){var t;return lt(this,o),(t=r.apply(this,arguments)).properties=new Map,t.render=new Map,t.update=new Map,t.hitTest=new Map,t.keyTest=new Map,t.loaded=new Map,t}return o}(y),vt={keyDown:"onKeyDown",keyPress:"onKeyPress",keyUp:"onKeyUp"};function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.isKeyEnabled=function(t){var e;return null===(e=t.keyEnabled)||void 0===e||e},t.dispatchEvent=function(t,e){var n=vt[e.type];n&&t[n]&&t[n](e)}}(ht||(ht={}));var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ot(r);if(o){var n=Ot(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xt(this,t)});function u(){var t;return mt(this,u),(t=i.apply(this,arguments)).depth=0,t.enabled=!0,t}return e=u,(n=[{key:"dispatch",value:function(t){if(this.enabled){var e=this.engine.root;e&&(this.keyEvent=t,this.depth=0,this.dispatchComponent(e))}}},{key:"dispatchComponent",value:function(t){if(!(this.depth>this.engine.depth)&&ht.isKeyEnabled(t)){var e=this.engine.components.keyTest.get(t.type);e&&e(t,this.engine),ht.dispatchEvent(t,this.keyEvent)}}}])&&gt(e.prototype,n),u}(y),Mt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.depth=32,this.components=new dt(this),this.updater=new C(this),this.loading=new B(this),this.renderer=new x(this),this.pointers=new K(this),this.keyboard=new _t(this),this.ticker=new F(this),this.debug=new tt(this),this.resources=new ct(this),e.init(this),o.init(this)};function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Rt(e);if(n){var o=Rt(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Ct(this,t)});function o(){return Et(this,o),r.apply(this,arguments)}return o}(y);function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e){return(Lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xt(t,e){return!e||"object"!==kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yt,It,Ut,Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lt(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bt(r);if(o){var n=Bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Xt(this,t)});function u(){var t;return Tt(this,u),(t=i.apply(this,arguments)).width=400,t.height=400,t.pixelRatio=0,t.fullscreen=!1,t.matrix=a.empty(),t}return e=u,(n=[{key:"getMatrix",value:function(){var t=this.getPixelRatio();return this.matrix.a=t,this.matrix.d=t,this.matrix}},{key:"getWidth",value:function(){return this.fullscreen?this.getWindowWidth():this.width}},{key:"getHeight",value:function(){return this.fullscreen?this.getWindowHeight():this.height}},{key:"getPixelRatio",value:function(){return this.pixelRatio>0?this.pixelRatio:this.getWindowPixelRatio()}}])&&At(e.prototype,n),u}(y);!function(t){t.getX=function(t,e){var n=t.pivotX;return n?-n*e:0},t.getY=function(t,e){var n=t.pivotY;return n?-n*e:0},t.hasValues=function(t){var e=t.pivotX,n=t.pivotY;return!!e||!!n}}(Yt||(Yt={})),function(t){function e(t,e){switch(t.split(".").pop()){case"png":case"jpg":case"webp":var n={asset:t,loaded:!1,bytesLoaded:0,bytesTotal:0},r=document.createElement("img");return r.src=t,r.onload=function(){e.debug.log("image loaded: ".concat(t)),n.image=r,n.loaded=!0},r.onerror=function(t){e.debug.warning("image load error",t)},n}return null}t.resolve=e,t.init=function(t){t.resources.resolvers.add(e)}}(It||(It={})),function(t){function e(t,e){switch(t.split(".").pop()){case"txt":case"json":var n={asset:t,loaded:!1,bytesLoaded:0,bytesTotal:0},r=new XMLHttpRequest;return r.open("GET",t,!0),r.onprogress=function(t){n.bytesLoaded=t.loaded,n.bytesTotal=t.total},r.onload=function(){e.debug.log("string loaded: ".concat(t)),n.data=r.responseText,n.loaded=!0,n.bytesLoaded=n.bytesTotal},r.onerror=function(t){e.debug.warning("string load error",t)},r.send(),n}return null}t.resolve=e,t.init=function(t){t.resources.resolvers.add(e)}}(Ut||(Ut={}));var Dt,Vt="image";!function(t){t.calculateBounds=function(t,e,n){var r=t.src;if(r){var o=n.resources.get(r);if(null!=o&&o.image){var i=o.image,u=i.width,a=i.height,c=Yt.getX(t,u),l=Yt.getY(t,a);e.x=c,e.y=l,e.width=u,e.height=a}else f.setEmpty(e)}else f.setEmpty(e)}}(Dt||(Dt={}));var Wt,Kt,Ht=f.empty();!function(t){function e(t,e){var n=e.pointers.local;Dt.calculateBounds(t,Ht,e);var r=f.contains(Ht,n);if(r&&t.pointerTestShape){var o=e.resources.get(t.src);if(null!=o&&o.image){var i=n.x-Ht.x,u=n.y-Ht.y;if(o.image instanceof HTMLCanvasElement)r=o.image.getContext("2d").getImageData(i,u,1,1).data[3]>0;else{var a=e.platform,c=a.createCustomContext();c.setTransform(),c.clearRect(0,0,1,1),c.drawImage(o.image,i,u,1,1,0,0,1,1),r=c.getImageData(0,0,1,1).data[3]>0,a.destroyCustomContext(c)}}else r=!1}return r}function n(t,e){var n=e.loading.getContext(),r=t.src;if(!r)return n.progress=1,void(n.loaded=!0);var o=e.resources.get(r);n.progress=Z.getProgress(o),n.loaded=!(null==o||!o.loaded||null==o||!o.image)}t.hitTest=e,t.loaded=n,t.init=function(t){t.components.hitTest.set(Vt,e),t.components.loaded.set(Vt,n),It.init(t)}}(Wt||(Wt={})),function(t){function e(t,e){var n=t.src;if(n){var r=e.resources.get(n);if(null!=r&&r.image){var o=e.renderer.getContext(),i=o.colorTransform;if(!(i.alphaMultiplier<=0)){var u=e.platform.getContext(),a=o.matrix;u.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty);var c=r.image,f=c.width,l=c.height,s=Yt.getX(t,f),p=Yt.getY(t,l);u.globalAlpha=i.alphaMultiplier,u.drawImage(r.image,s,p)}}}}t.render=e,t.init=function(t){Wt.init(t),t.components.render.set(Vt,e)}}(Kt||(Kt={}));var Ft,Gt,qt=f.empty(),zt=f.empty();function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t,e){return!e||"object"!==$t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){function e(t,e){var n=t.src;if(n){var r=e.resources.get(n);if(null!=r&&r.image){var o=e.renderer.getContext(),u=o.colorTransform;if(!(u.alphaMultiplier<=0)){var c=o.matrix,l=e.platform,s=l.getContext(),p=r.image,y=p.width,h=p.height,d=Yt.getX(t,y),v=Yt.getY(t,h);if(i.isEmptyWithAlpha(u))s.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),s.globalAlpha=u.alphaMultiplier,s.drawImage(r.image,d,v);else{var b=l.createCustomContext();if(qt.x=d,qt.y=v,qt.width=y,qt.height=h,a.transformBounds(c,qt,qt),f.isEmpty(qt))return;if(zt.width=b.canvas.width,zt.height=b.canvas.height,f.intersection(qt,zt,qt),f.isEmpty(qt))return;f.round(qt),b.setTransform(),b.clearRect(qt.x,qt.y,qt.width,qt.height),b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),b.drawImage(r.image,d,v);for(var m=b.getImageData(qt.x,qt.y,qt.width,qt.height),g=u.redMultiplier,w=u.greenMultiplier,x=u.blueMultiplier,O=u.alphaMultiplier,_=u.redOffset,M=u.greenOffset,P=u.blueOffset,E=u.alphaOffset,j=m.data,C=j.length,R=0;R<C;)j[R]=j[R++]*g+_,j[R]=j[R++]*w+M,j[R]=j[R++]*x+P,j[R]=j[R++]*O+E;b.putImageData(m,qt.x,qt.y),s.setTransform(),s.globalAlpha=1,s.drawImage(b.canvas,qt.x,qt.y,qt.width,qt.height,qt.x,qt.y,qt.width,qt.height),l.destroyCustomContext(b)}}}}}t.render=e,t.init=function(t){Wt.init(t),t.components.render.set(Vt,e)}}(Ft||(Ft={})),function(t){function e(t,e,n){var r=t>>16&255,o=t>>8&255,u=255&t,a=255*e;return i.isEmpty(n)||(r=r*n.redMultiplier+n.redOffset&255,o=o*n.greenMultiplier+n.greenOffset&255,u=u*n.blueMultiplier+n.blueOffset&255,a=a*n.alphaMultiplier+n.alphaOffset&255),a<255?"rgba(".concat(r,", ").concat(o,", ").concat(u,", ").concat(a/255,")"):"rgb(".concat(r,", ").concat(o,", ").concat(u,")")}function n(t,n,r,o,i){for(var u=0;u<n.length;u++){var a=n[u],c=r[u],f=o[u];f<0&&(f=0),f>1&&(f=1);var l=e(a,c,i);t.addColorStop(f,l)}}t.colorPattern=e,t.addGradientColors=n,t.radialGradientPattern=function(t,e,r,o,i,u,a,c,f,l,s){var p=s.createRadialGradient(t,e,r,o,i,u);return n(p,a,c,f,l),p},t.linearGradientPattern=function(t,e,r,o,i,u,a,c,f){var l=f.createLinearGradient(t,e,r,o);return n(l,i,u,a,c),l},t.bitmapPattern=function(t,e,n,r){var o=r.createPattern(t,e?"repeat":"none");if(o){var i,u,a,c,f,l,s=new DOMMatrix;return s.a=null!==(i=n.a)&&void 0!==i?i:1,s.b=null!==(u=n.b)&&void 0!==u?u:0,s.c=null!==(a=n.c)&&void 0!==a?a:0,s.d=null!==(c=n.d)&&void 0!==c?c:1,s.e=null!==(f=n.tx)&&void 0!==f?f:0,s.f=null!==(l=n.ty)&&void 0!==l?l:0,o.setTransform(s),o}return""}}(Gt||(Gt={}));var ne,re,oe,ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ee(r);if(o){var n=ee(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return te(this,t)});function u(){return Jt(this,u),i.apply(this,arguments)}return e=u,(n=[{key:"getWindowWidth",value:function(){return window.innerWidth}},{key:"getWindowHeight",value:function(){return window.innerHeight}},{key:"getWindowPixelRatio",value:function(){var t;return null!==(t=window.devicePixelRatio)&&void 0!==t?t:1}}])&&Qt(e.prototype,n),u}(Nt);function ue(t,e,n){var r={type:n,key:e.key,code:e.code,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey,repeat:e.repeat};t.keyboard.dispatch(r),e.preventDefault()}function ae(t,e,n){var r=t.platform.view,o=r.getBoundingClientRect(),i=e.clientX-o.left-r.clientLeft,u=e.clientY-o.top-r.clientTop;t.pointers.dispatch(n,i,u,0),e.preventDefault()}function ce(t,e,n){for(var r=t.platform.view,o=r.getBoundingClientRect(),i=0;i<e.changedTouches.length;i++){var u=e.changedTouches[i],a=u.clientX-o.left-r.clientLeft,c=u.clientY-o.top-r.clientTop;t.pointers.dispatch(n,a,c,u.identifier)}e.preventDefault()}function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pe(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function be(t,e){return(be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function me(t,e){return!e||"object"!==he(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}!function(t){t.init=function(t){document.addEventListener("keydown",(function(e){ue(t,e,"keyDown")})),document.addEventListener("keypress",(function(e){ue(t,e,"keyPress")})),document.addEventListener("keyup",(function(e){ue(t,e,"keyUp")}))}}(ne||(ne={})),function(t){t.init=function(t){var e=t.platform.view;e.addEventListener("mousedown",(function(e){ae(t,e,"pointerDown")})),e.addEventListener("mouseup",(function(e){ae(t,e,"pointerUp")})),e.addEventListener("mousemove",(function(e){ae(t,e,"pointerMove")})),e.addEventListener("mouseleave",(function(e){ae(t,e,"pointerCancel")}))}}(re||(re={})),function(t){t.init=function(t){var e=t.platform.view;e.addEventListener("touchstart",(function(e){ce(t,e,"pointerDown")})),e.addEventListener("touchend",(function(e){ce(t,e,"pointerUp")})),e.addEventListener("touchmove",(function(e){ce(t,e,"pointerMove")})),e.addEventListener("touchcancel",(function(e){ce(t,e,"pointerCancel")}))}}(oe||(oe={}));var we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&be(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ge(r);if(o){var n=ge(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return me(this,t)});function u(){var t;return de(this,u),(t=i.apply(this,arguments)).view=document.createElement("canvas"),t.contexts=[t.view.getContext("2d")],t.customContexts=[],t}return e=u,(n=[{key:"getContext",value:function(){return this.contexts[this.contexts.length-1]}},{key:"saveContext",value:function(t){this.contexts.push(t)}},{key:"restoreContext",value:function(){this.contexts.length>1?this.contexts.pop():this.engine.debug.warning("Trying to restore main context")}},{key:"createCustomContext",value:function(){var t;t=this.customContexts.length?this.customContexts.pop():document.createElement("canvas").getContext("2d");var e=this.view,n=e.width,r=e.height;return t.canvas.width!==n&&(t.canvas.width=n),t.canvas.height!==r&&(t.canvas.height=r),t}},{key:"destroyCustomContext",value:function(t){this.customContexts.push(t)}},{key:"begin",value:function(){this.clear(),this.updateSize()}},{key:"end",value:function(){}},{key:"clear",value:function(){var t=this.view,e=this.getContext();e.setTransform(),e.clearRect(0,0,t.width,t.height)}},{key:"updateSize",value:function(){var t=this.engine.screen.getWidth(),e=this.engine.screen.getHeight(),n=this.engine.screen.getPixelRatio(),r=Math.floor(t*n),o=Math.floor(e*n),i=this.view;i.width===r&&i.height===o||(i.width=r,i.height=o,i.style.width="".concat(t,"px"),i.style.height="".concat(e,"px"))}}])&&ve(e.prototype,n),u}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=ye(e);if(n){var o=ye(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return pe(this,t)});function o(){return le(this,o),r.apply(this,arguments)}return o}(St));function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _e(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?Me(t):e}function Me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ee=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Pe(e);if(n){var o=Pe(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return _e(this,t)});function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).platform=new we(Me(t)),t.screen=new ie(Me(t)),t}return o}(Mt));Kt.init(Ee),ne.init(Ee),Ee.screen.fullscreen=!0,Ee.ticker.play(),document.body.appendChild(Ee.platform.view);const je=["assets/Archer3_hunter_image.png","assets/Archer5_ranger_image.png"];Ee.root={type:"container",children:{archer:{type:"image",src:je[0],pivotX:.5,pivotY:.5,x:Ee.screen.getWidth()/2,y:Ee.screen.getHeight()/2,speed:{x:0,y:0},onUpdate(t){this.x+=this.speed.x*t,this.y+=this.speed.y*t},onKeyDown(t){switch(t.code.toLocaleLowerCase()){case"space":case"enter":let t=je.indexOf(this.src);t++,t>=je.length&&(t=0),this.src=je[t];break;case"arrowleft":this.speed.x=-100;break;case"arrowright":this.speed.x=100;break;case"arrowup":this.speed.y=-100;break;case"arrowdown":this.speed.y=100}},onKeyUp(t){switch(t.code.toLocaleLowerCase()){case"arrowleft":case"arrowright":this.speed.x=0;break;case"arrowup":case"arrowdown":this.speed.y=0}}}}}})();